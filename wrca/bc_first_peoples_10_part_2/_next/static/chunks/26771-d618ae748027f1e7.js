"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26771],{55098:function(t,e,r){r.d(e,{$y:function(){return o},B_:function(){return N},D6:function(){return g},E5:function(){return S},Eo:function(){return E},G5:function(){return n},GN:function(){return h},Iv:function(){return x},J8:function(){return P},MH:function(){return d},Nr:function(){return y},Qx:function(){return w},Ry:function(){return A},Sb:function(){return f},TD:function(){return R},Tb:function(){return k},W8:function(){return a},WB:function(){return b},X9:function(){return Z},dr:function(){return u},e2:function(){return U},eN:function(){return C},fG:function(){return c},hH:function(){return l},jH:function(){return p},kI:function(){return v},mD:function(){return D},nt:function(){return I},qf:function(){return i},qk:function(){return m},vr:function(){return M},xP:function(){return j},yB:function(){return $},zO:function(){return s}});const n="text-editor",i="placeholder",o=`.${i}`,a='span[data-slate-placeholder="true"]',u=`.${n}`,s="caption-editor-container",c=`.${s}`,d="story-container",p=`.${d}`,l="smesrimktanalytics",f="ArcGIS StoryMaps Enterprise Edition",m="https://example.com",g=["image/png","image/jpeg","image/gif","image/bmp","image/svg+xml"],h=["video/mp4"],w=["audio/mp3","audio/mpeg","audio/wav","audio/x-wav"],v=["application/pdf"],y=["gpx","json","geojson"],$=[...y,"application/json"],b=1e7,k=5e7,x=25e6,I="smitem1",D="56rem",j=60,Z=140,C=125,M=+(16/9).toFixed(4),P="Story data overwrite rejected",S=60,E="Cannot duplicate story due to custom check",U=1080,G="41.7rem",N=G,R=G,A=6e3},36871:function(t,e,r){r.d(e,{Z:function(){return i}});var n=r(69466);class i extends Error{constructor(t){super(),this.name="StoryBuilderError";const{type:e,itemType:r}=t;this.type=this.message=e,this.itemType=r;const{statusCode:i}=(0,n.P)(this.type);this.statusCode=i}}},69466:function(t,e,r){r.d(e,{P:function(){return s},v:function(){return c}});var n=r(52322),i=r(42670),o=r(52373),a=r(45822),u=r(9286);const s=t=>{let e,r="unknown";switch(t){case"story-privileges-create":case"story-privileges-edit":case"story-privileges-preview":case"theme-public-account":case"briefing-public-account":case"story-inaccessible":case"unsupported-account":case"sign-in":case"blocked-org":r=t,e=403;break;case"item-not-supported-on-route":case"story-not-found":r=t,e=404;break;case"story-load":case"org-settings-load":r=t,e=500;break;default:r="unknown",e=500}return{errorType:r,statusCode:e}},c=(t,e)=>({"unsupported-account":{title:(0,n.jsx)(i.Z,{id:"page.error.unsupportedTitle"}),description:(0,n.jsx)(i.Z,{id:`page.error.${e}.unknownDescription`})},"sign-in":{description:(0,n.jsx)(i.Z,{id:"page.error.signInDescription"})},"story-inaccessible":{description:(0,n.jsx)(i.Z,{id:`page.error.${e}.inaccessibleDescription`})},"story-not-found":{description:(0,n.jsx)(i.Z,{id:`page.error.${e}.inaccessibleDescription`})},"story-privileges-create":{description:(0,n.jsx)(i.Z,{id:"page.error.items.privilegesCreateDescription"})},"story-privileges-edit":{description:(0,n.jsx)(i.Z,{id:`page.error.${e}.privilegesEditDescription`})},"story-privileges-preview":{description:(0,n.jsx)(i.Z,{id:`page.error.${e}.privilegesPreviewDescription`})},"item-not-supported-on-route":{description:(0,n.jsx)(i.Z,{id:`page.error.${e}.inaccessibleDescription`})},"story-load":{description:(0,n.jsx)(i.Z,{id:"page.error.item.loadDescription"})},"org-settings-load":{description:(0,n.jsx)(i.Z,{id:"page.error.orgSettings.loadDescription"})},"theme-public-account":{title:(0,n.jsx)(i.Z,{id:"page.error.unknownTitle"}),description:(0,n.jsx)(i.Z,{id:"publicAccount.disabled.link",values:{"product-doc":t=>(0,n.jsx)("a",{href:"https://storymaps.arcgis.com/redirect/pricing",children:t})}})},"briefing-public-account":{title:(0,n.jsx)(i.Z,{id:"page.error.unknownTitle"}),description:(0,n.jsx)(i.Z,{id:"publicAccount.disabled.link",values:{"product-doc":t=>(0,n.jsx)("a",{href:"https://storymaps.arcgis.com/redirect/pricing",children:t})}})},"blocked-org":{icon:(0,n.jsx)(a.Z,{path:o.Z,size:32,sizeMultiplier:3,fill:u.default.color.emeraldGreen}),description:(0,n.jsx)(i.Z,{id:"page.error.noAccess"}),link:{href:`https://${t}`,isExternal:!0,text:(0,n.jsx)(i.Z,{id:"page.error.arcgisHome"})}},"distributed-collab-no-draft":{description:(0,n.jsx)(i.Z,{id:`page.error.${e}.unknownDescription`})},unknown:{description:(0,n.jsx)(i.Z,{id:`page.error.${e}.unknownDescription`})}})},59773:function(t,e,r){r.d(e,{$:function(){return n}});const n=(t,e)=>{try{const r=[window.location.hostname,"arcgis.com"],n=r?[e].concat(r):[e];for(const e of n){const r=new URL(t).hostname;if(new RegExp(e).test(r))return!0}return!1}catch{throw new Error("Only available in browser environments with new URL()")}}},16027:function(t,e,r){r.d(e,{g:function(){return a},n:function(){return o}});var n=r(11230),i=r(33461);const o=t=>{let{width:e,fileName:r,shouldIgnoreDPR:o}=t;if(/\.(svg|gif)$/i.test(r??""))return 0;const a=e*(o?1:(0,n.D7)()),u=i.C;for(const n of u)if(a<=n)return n;return Math.round(a)},a=t=>{const{basePortalUrl:e,user:r,token:n,timestamp:i,imageWidth:a}=t,{username:u,thumbnail:s}=r;if(!e||!u||!s)return"";const c=`${e}/community/users/${u}/info/${s}`,d=[];if(n&&d.push(`token=${n}`),i&&d.push(`ts=${i}`),a){const t=o({width:a,fileName:s});t&&d.push(`w=${t}`)}return d.length?`${c}?${d.join("&")}`:c}},33461:function(t){t.exports.C=[20,50,100,200,400,600,800,1200,1600,2e3,2400]},43746:function(t,e,r){r.d(e,{A7:function(){return I},Dn:function(){return h},E8:function(){return x},HX:function(){return y},LZ:function(){return p},NJ:function(){return $},Sg:function(){return b},WQ:function(){return m},ZX:function(){return v},_$:function(){return j},fW:function(){return D},gJ:function(){return f},mY:function(){return w},pz:function(){return k},rj:function(){return l},vb:function(){return g}});var n=r(48206),i=r(69378),o=r(73927),a=r(79562),u=r(57105),s=r(23038),c=r(30858),d=r(39613);const p=async t=>{const{authManager:e,isFavorite:r,itemId:i,owner:o}=t,a=await e.getUser();if(r){return await(0,n.Ju)({id:i,groupId:a.favGroupId,authentication:e,owner:o})}return await(0,n.lF)({id:i,groupId:a.favGroupId,authentication:e,owner:o})},l=(t,e)=>"published"===e?`${o.wC}${t}`:`${o.AY}${t}`,f=t=>{const e=new RegExp(`^(${o.AY}|${o.wC})`);return t.replace(e,"")},m=async(t,e,r)=>{if(!e)return!1;const i=await e.getUser();if(!i.favGroupId)return!1;const{items:o,nextStart:a}=await(0,n.Ye)(i.favGroupId,{authentication:e,paging:{num:100,start:"number"===typeof r?r:1}});return-1!==o.findIndex((e=>e.id===t))||-1!==a&&m(t,e,a)},g=async t=>{const{total:e,num:r,resources:i}=await(0,n.C)(t.itemId,{authentication:t.authManager,portal:t.portal,params:{owner:t.username}});if(e>r){return(await Promise.all(new Array(Math.ceil(e/r)).fill(void 0).reduce(((e,i,o)=>[...e,(0,n.C)(t.itemId,{authentication:t.authManager,portal:t.portal,params:{owner:t.username,start:o*r+1}})]),[]))).reduce(((t,e)=>[...t,...e.resources]),[])}return i},h=t=>{const e=`${(0,d.Zl)(t.portalHost,t.authManager)}/content/items/${t.itemId}/resources/${t.resourceId}`;return(0,i.WY)(e,{authentication:t.authManager})},w=async t=>{var e,r,i;const o=await(0,n.tX)(t.itemDetails.id,{authentication:t.authManager}),a=[...(null===(e=o.admin)||void 0===e?void 0:e.map((t=>t.id)))||[],...(null===(r=o.member)||void 0===r?void 0:r.map((t=>t.id)))||[],...(null===(i=o.other)||void 0===i?void 0:i.map((t=>t.id)))||[]];if(t.excludeFavoritesGroup){const e=(await t.authManager.getUser()).favGroupId;return a.filter((t=>t!==e))}return a},v=t=>t.typeKeywords&&t.typeKeywords.includes("Copy Item"),y=t=>t===c.dq.Image||t===c.dq.PDF,$=(t,e,r)=>{var n;return y(t.type)&&t.access!==a.eJ.PUBLIC&&(null===(n=r)||void 0===n?void 0:n.token)?`${e}?token=${r.token}`:e},b=t=>{let{portalHost:e,itemDetails:r,fallbackUrl:n,authManager:i,size:d,isGroup:p,returnOriginalAspectRatio:l,shouldIgnoreDPR:f}=t;var m,g;const h=r.modified&&Math.abs(new Date(r.modified).getTime()-Date.now())<36e5?`&d=${r.modified}`:"",w=(0,s.G)(r);if(r.id&&(r.thumbnail||(null===(g=w)||void 0===g||null===(m=g.thumbnail)||void 0===m?void 0:m[0]))){var v;if(/^https:\/\//.test(r.thumbnail))return r.thumbnail;if(r.type===o.Cs){var y,$,b,k;if("default"===(null===($=w)||void 0===$||null===(y=$.thumbnail)||void 0===y?void 0:y[0]))return n;if((d||l)&&"url"===(null===(k=w)||void 0===k||null===(b=k.thumbnail)||void 0===b?void 0:b[0]))return(0,u.aU)(w.thumbnail[1],{width:d??400,authManager:i,shouldIgnoreDPR:f,portalHost:e,publicItemIdForCDN:r.access===a.eJ.PUBLIC&&r.id?r.id:void 0})}const t=800;return`https://${e}/sharing/rest/${p?"community/groups":"content/items"}/${r.id}/info/${r.thumbnail}?w=${t}${(null===(v=i)||void 0===v?void 0:v.token)?`&token=${i.token}`:""}${h}`}var x;return r.type===c.dq.Image?`https://${e}/sharing/rest/content/items/${r.id}/data${(null===(x=i)||void 0===x?void 0:x.token)?`?token=${i.token}`:""}`:n},k=(t,e,r)=>`${(0,d.$E)(e,r)}/home/item.html?id=${t}`,x=(t,e)=>{try{const r=new URL(t);if(!(t=>/ago-items?-/.test(t.host)&&t.host.endsWith(".amazonaws.com")&&t.searchParams.has("X-Amz-Security-Token")&&t.searchParams.has("X-Amz-Credential"))(r))return;const n=(0,d.Zl)(e),i=r.pathname.match(/^\/([A-Za-z0-9]{32})\//),o=i&&i[1];if(o)return`${n}/content/items/${o}/data`}catch{return}},I=(t,e)=>{var r;return"admin"===t.itemControl||t.owner===(null===(r=e)||void 0===r?void 0:r.username)},D=t=>{var e;return"undefined"!==typeof t.isViewerCopiable?t.isViewerCopiable:!!(null===(e=t.typeKeywords)||void 0===e?void 0:e.includes(o.Mk))},j=(t,e)=>{var r;return(e??t.access)===a.eJ.PUBLIC&&!(null===(r=t.typeKeywords)||void 0===r?void 0:r.includes(o.LB))}},57105:function(t,e,r){r.d(e,{Jt:function(){return c},aU:function(){return d}});var n=r(59773),i=r(16027),o=r(39613),a=r(11230),u=r(51171);const s={width:"w",widthWithArcGISBreakPoints:"wago",authManagerToken:"ust",sharingUrl:"https://su.example"},c=t=>{const e=t=>`{{${t}}}`;if("simple"===t.template)return"sharingUrl"===t.replacer?s.sharingUrl:e(s[t.replacer]);if("queryParam"===t.template){const r=t.replacers.reduce(((t,e)=>"width"===e.replacer?t.concat([[s[e.replacer],e.queryParam]]):s[e.replacer]?t.concat([[s[e.replacer]]]):t),[]);return e(`qp|${JSON.stringify(r)}`)}return""},d=(t,e)=>{let r=!1;const c=e.width?e.width*(e.shouldIgnoreDPR?1:(0,a.D7)()):void 0;let d=t.replace(new RegExp(`{{${s.width}}}`),String(c??window.innerWidth??2e3)).replace(new RegExp(`^${s.sharingUrl}`),(0,o.Zl)(e.portalHost));e.publicItemIdForCDN&&new RegExp(`^${(0,o.Zl)("www.arcgis.com")}/content/items/${e.publicItemIdForCDN}/resources/\\S`).test(d)&&(r=!0,d=d.replace(/^https:\/\/www/,"https://cdn"));let p=[];return d=d.replace(new RegExp("{{qp\\|([^;]*)}}"),((t,e)=>{try{p=JSON.parse(e)}catch{}return""})),d=p.reduce(((t,o)=>{var a;const d=o[0];if(d===s.width&&c){const e=o[1];return(0,u.Cn)(t,{[e]:String(c)})}if(d===s.widthWithArcGISBreakPoints&&c){const e=(0,i.n)({width:c,shouldIgnoreDPR:!0});return(0,u.Cn)(t,{w:String(e)})}return!r&&d===s.authManagerToken&&(null===(a=e.authManager)||void 0===a?void 0:a.token)&&(0,n.$)(t,e.portalHost)?(0,u.Cn)(t,{token:e.authManager.token}):t}),d),d}},23038:function(t,e,r){r.d(e,{G:function(){return o},M:function(){return a}});var n=r(98537),i=r.n(n);const o=t=>{try{return("string"===typeof t.properties?JSON.parse(t.properties):t.properties)??void 0}catch{return}},a=(t,e)=>{if("replace"===e)return JSON.stringify(t);const r=o(e)??{},n=i()({},r,t);return JSON.stringify(n)}}}]);