(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53743],{53743:function(e,t,r){"use strict";r.r(t),r.d(t,{Telemetry:function(){return h},WindowUndefinedError:function(){return u},createScriptTags:function(){return d},injectScriptElement:function(){return l},injectScriptElementAsync:function(){return c},storage:function(){return a}});var n=r(11093),i=r.n(n),s=r(7736),o=r.n(s);const a={storage:{},memory:!0,get(e){let t;try{t=window.localStorage&&window.localStorage.getItem(e)||this.storage[e]}catch(r){t=this.storage[e]}if(t)try{return JSON.parse(t)}catch(r){return}},set(e,t){const r=JSON.stringify(t);try{window.localStorage.setItem(e,r)}catch(n){this.memory||(console.error("setting local storage failed, falling back to in-memory storage"),this.memory=!0),this.storage[e]=t}},delete(e){try{window.localStorage.removeItem(e)}catch(t){this.memory||(console.error("setting local storage failed, falling back to in-memory storage"),this.memory=!0),delete this.storage[e]}}};function c(e){return new Promise(((t,r)=>{e.onload=t,e.onerror=r;l(e)&&!e.body||t()}))}function l(e){const{body:t,src:r,id:n,dataAttribute:i,section:s="body",type:o="text/javascript",async:a=!1,defer:c=!1,onload:l,onerror:d}=e;if("undefined"===typeof window)throw new u("Window is undefined: Cannot add script element.");if(function(e){const{id:t,dataAttribute:r}=e;return!!document.getElementById(t)||!!document.querySelector(`[data-esri-telemetry="${r}"]`)}(e))return void console.log(`script (${n||i}) is already present, skipping`);const f=function({id:e,dataAttribute:t,type:r,async:n,defer:i,body:s,src:o,onload:a,onerror:c}){const l=document.createElement("script");e&&(l.id=e);t&&l.setAttribute("data-esri-telemetry",t);return o&&(l.src=o),s&&(l.innerText=s),l.type=r,l.async=n,l.defer=i,a&&(l.onload=a),c&&(l.onerror=c),l}({id:n,dataAttribute:i,type:o,async:a,defer:c,body:t,src:r,onload:l,onerror:d});return"body"===s?document.body.appendChild(f):document.head.appendChild(f)}class u extends Error{}function d(e){return e.map((e=>{const t=[];return["src","id","dataAttribute","type"].forEach((r=>{let n=r;"dataAttribute"===r&&(n="data-esri-telemetry"),e[r]&&t.push(`${n}="${e[r]}"`)})),["async","defer"].forEach((r=>{e[r]&&t.push(`${r}`)})),`<script ${t.join(" ")}>${e.body?e.body:""}<\/script>`})).join("")}const f=["esri.com","esriuk.com","esri.de","esri.ca","esrifrance.fr","esri.nl","esri-portugal.pt","esribulgaria.com","esri.fi","esri.kr","esrimalaysia.com.my","esri.es","esriaustralia.com.au","esri-southafrica.com","esri.cl","esrichina.com.cn","esri.co","esriturkey.com.tr","geodata.no","esriitalia.it","esri.pl"];class h{constructor(e){var t,r,n;this.trackers=[],this.options=e,this.debug=e.debug,this.suppressDisabledWarnings=e.suppressDisabledWarnings,this.disabled=function(e={}){const{disabled:t,portal:r}=e;return!(!t&&!1!==(null===r||void 0===r?void 0:r.eueiEnabled))||!(!r||function(e){return e.eueiEnabled&&e.user&&e.user.orgId===e.id}(r)||function(e){return e.user&&!e.user.orgId&&"US"===e.ipCntryCode}(r)||function(e){return!e.user&&"US"===e.ipCntryCode}(r))}(e),this.logger=e.logger||console,this.disabled&&!this.suppressDisabledWarnings&&this.logger.info("Telemetry Disabled");const i=(null===(t=e.portal)||void 0===t?void 0:t.user)||e.user;i&&this.setUser(i,null===(n=null===(r=e.portal)||void 0===r?void 0:r.subscriptionInfo)||void 0===n?void 0:n.type),this.disabled||this.initializeTrackers()}initializeTrackers(){this.options.plugins&&this.trackers.push(...this.options.plugins),this.trackers.length||this.logger.error(new Error("No trackers configured"))}getScriptTags(){return this.trackers.map((e=>e.getScriptTags&&e.getScriptTags())).join("")}async init(){const e=this.trackers.map((e=>e.init()));await Promise.all(e)}setUser(e={},t="Public"){let r;if(e="string"===typeof e?{username:e}:e,this.user=e,this.user.accountType=t,e.email&&e.email.split){const t=e.email.split("@")[1];r=f.filter((e=>t===e)).length>0}(r||["In House","Demo and Marketing"].indexOf(t)>-1)&&(this.user.internalUser=!0)}logPageView(e,t={},r={}){if(this.disabled&&!this.suppressDisabledWarnings)return this.logger.info("Page view was not logged because telemetry is disabled."),!1;const n=this.trackers.filter((({disabled:e,hasError:t})=>!e&&!t));if(!n.length)return this.logger.warn("Page view was not logged because no enabled telemetry-plugins are registered."),!1;const i=this.preProcess(t,r);this.debug&&this.logger.info("Tracking page view",JSON.stringify(i));const s=n.map((t=>t.logPageView(e,i)));return Promise.all(s).then(),!0}logEvent(e,t={}){if(this.disabled&&!this.suppressDisabledWarnings)return this.logger.info("Event was not logged because telemetry is disabled."),!1;const r=this.trackers.filter((({disabled:e,hasError:t})=>!e&&!t));if(!r.length)return this.logger.warn("Event was not logged because no enabled telemetry-plugins are registered."),!1;const n=this.preProcess(e,t);this.debug&&this.logger.info("Tracking event",JSON.stringify(n));const i=r.map((e=>e.logEvent(n)));return Promise.all(i).then(),!0}logError(e={}){e=Object.assign({eventType:"error"},e),this.logEvent(e)}startWorkflow(e,t={}){const r={name:e,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this.saveWorkflow(r);const n=Object.assign({name:e,step:"start"},t);return this.logWorkflow(n),r}stepWorkflow(e,t,r={}){const n="string"===typeof r?r:r.details,i=Object.assign({name:e,step:t,details:n},r);this.logWorkflow(i)}endWorkflow(e,t={}){const r=Object.assign({name:e,step:"finish"},t);this.logWorkflow(r)}cancelWorkflow(e,t={}){const r=Object.assign({name:e,step:"cancel"},t);this.logWorkflow(r)}getWorkflow(e){const t=a.get(`TELEMETRY-WORKFLOW:${e}`);if(t){if(Date.now()-t.start<18e5)return t;this.deleteWorkflow(t)}}saveWorkflow(e){a.set(`TELEMETRY-WORKFLOW:${e.name}`,e)}deleteWorkflow(e){a.delete(`TELEMETRY-WORKFLOW:${e.name}`)}logWorkflow(e={}){e=this.preProcess(e);let t=this.getWorkflow(e.name);t||(this.startWorkflow(e.name),t=this.getWorkflow(e.name)),t.steps.push(e.step),t.duration=(Date.now()-t.start)/1e3,["cancel","finish"].indexOf(e.step)>-1?this.deleteWorkflow(t):this.saveWorkflow(t);const r=Object.assign(e,{eventType:"workflow",category:e.name,action:e.step,label:e.details,duration:t.duration,workflowId:t.workflowId});this.logEvent(r)}preProcess(e={},t={}){let r={};return this.user&&(r={user:g(this.user.username),org:g(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),Object.entries(Object.assign(Object.assign({},e),r)).reduce((n=t.omitComplexData,i=this.logger,function(e,[t,r]){return function(e){return["string","number","boolean","undefined"].includes(typeof e)||e&&"string"===typeof e.valueOf()}(r)?e[t]=r:n||(i.warn(`You are trying to log a non-primitive value, ${t}:${JSON.stringify(r)}. This will get logged as [object Object]`),e[t]=r),e}),{});var n,i}disableTracker(e){var t;const r=this.trackers.find((({name:t})=>t===e));r&&!r.hasError&&(r.disabled=!0,null===(t=r.disable)||void 0===t||t.call(r))}enableTracker(e){var t;const r=this.trackers.find((({name:t})=>t===e));r&&!r.hasError&&(r.disabled=!1,null===(t=r.enable)||void 0===t||t.call(r))}}function g(e){if(e)return i()(e).toString(o())}},57359:function(e,t,r){e.exports=function(){var e=e||function(e,t){var n;if("undefined"!==typeof window&&window.crypto&&(n=window.crypto),"undefined"!==typeof self&&self.crypto&&(n=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!==typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&"undefined"!==typeof r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(50633)}catch(y){}var i=function(){if(n){if("function"===typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(y){}if("function"===typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(y){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},a=o.lib={},c=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(var a=0;a<i;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new l.init(t,e)}}),u=o.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},f=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},g=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,s=n.sigBytes,o=this.blockSize,a=s/(4*o),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,u=e.min(4*c,s);if(c){for(var d=0;d<c;d+=o)this._doProcessBlock(i,d);r=i.splice(0,c),n.sigBytes-=u}return new l.init(r,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(a.Hasher=g.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new p.HMAC.init(e,r).finalize(t)}}}),o.algo={});return o}(Math);return e}()},7736:function(e,t,r){!function(t,n){var i;e.exports=(i=r(57359),i.enc.Hex)}()},11093:function(e,t,r){!function(t,n){var i;e.exports=(i=r(57359),function(e){var t=i,r=t.lib,n=r.WordArray,s=r.Hasher,o=t.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(a[i]=r(e.pow(n,.5))),c[i]=r(e.pow(n,1/3)),i++),n++}();var l=[],u=o.SHA256=s.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],d=r[6],f=r[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var g=l[h-15],p=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=l[h-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[h]=p+l[h-7]+m+l[h-16]}var w=n&i^n&s^i&s,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),v=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[h]+l[h];f=d,d=u,u=a,a=o+v|0,o=s,s=i,i=n,n=v+(b+w)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+d|0,r[7]=r[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(u),t.HmacSHA256=s._createHmacHelper(u)}(Math),i.SHA256)}()}}]);