"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42599],{38038:function(e,t,r){r.d(t,{Z:function(){return w}});var s=r(52322),a=r(28505),i=r.n(a),o=r(2784),l=r(89274),n=r(92985),c=r(9286),d=r(86990),m=r(14535),u=r(30858),p=r(79562),b=r(23325),x=r(6622),g=r(63789),f=r(93546);class y extends o.PureComponent{render(){return(0,s.jsx)(f.Z,{tooltipContent:this.props.intl.formatMessage({id:this.props.stringId}),color:this.props.color,className:this.props.className})}}var h=(0,l.ZP)(y);class v extends o.PureComponent{static#e=(()=>{this.defaultProps={mode:u.PC.draft,sharingLevel:b.v,type:"default",itemType:g.o.Story}})();render(){const e=this.modeDetails[this.props.mode],t=this.modeDetails[u.PC.unpublishedChanges];if("indicator"===this.props.type){if(this.props.mode===u.PC.draft||this.props.mode===u.PC.published)return null;if(this.props.mode===u.PC.unpublishedChanges)return(0,s.jsx)(h,{stringId:t.statusStringId,color:t.indicatorColor,className:this.props.indicatorClassName})}return(0,s.jsx)(n.Z,{icon:this.getSharingLevelIcon(e.color),tooltipLabel:this.getTooltipStringId(),backgroundColor:e.backgroundColor,color:e.color,label:this.props.intl.formatMessage({id:e.statusStringId})})}constructor(...e){super(...e),this.modeDetails={[u.PC.draft]:{statusStringId:"component.badge.draft",backgroundColor:this.props.websiteDesign.productVariables.colors.highlight200,color:this.props.websiteDesign.productVariables.colors.highlight800},[u.PC.published]:{statusStringId:"component.badge.published",backgroundColor:this.props.websiteDesign.productVariables.colors.success300,color:this.props.websiteDesign.productVariables.colors.success800},[u.PC.unpublishedChanges]:{statusStringId:"component.badge.unpublished",backgroundColor:this.props.websiteDesign.productVariables.colors.info300,color:this.props.websiteDesign.productVariables.colors.info800,indicatorColor:this.props.websiteDesign.theme.colors.backgroundNudge}},this.getSharingLevelIcon=e=>{const t={styles:(0,s.jsx)(i(),{id:"43bce862bd85a465",dynamic:[c.default.spacing.xxxxs,c.default.spacing.xxxs],children:`.icon.__jsx-style-dynamic-selector{line-height:1em;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:${c.default.spacing.xxxxs} 0;-webkit-padding-start:${c.default.spacing.xxxs};-moz-padding-start:${c.default.spacing.xxxs};padding-inline-start:${c.default.spacing.xxxs}}.icon.__jsx-style-dynamic-selector::before{content:""}.icon.__jsx-style-dynamic-selector svg{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}`}),className:i().dynamic([["43bce862bd85a465",[c.default.spacing.xxxxs,c.default.spacing.xxxs]]])};return this.props.mode!==u.PC.draft?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d._,{accessLevel:this.getSharingAccessLevel(),className:t.className,color:e,isUnlisted:this.props.sharingLevel.isUnlisted}),t.styles]}):null},this.getSharingAccessLevel=()=>{var e;const t=!!(null===(e=this.props.sharingLevel.groups)||void 0===e?void 0:e.length);return this.props.sharingLevel.access===p.eJ.PRIVATE&&t?p.eJ.SHARED:this.props.sharingLevel.access},this.getTooltipStringId=()=>{const e=this.props.sharingLevel.isUnlisted?x.V.UNLISTED:this.getSharingAccessLevel(),t=this.props.mode===u.PC.draft?"component.badge.full.tooltips.draft":`component.badge.full.tooltips.${e}.${this.props.mode}`;return this.props.intl.formatMessage({id:t})}}}var w=(0,m.EL)((0,l.ZP)(v))},71455:function(e,t,r){r.d(t,{e:function(){return l}});var s=r(52322),a=r(2784),i=r(69405);const o=(0,a.forwardRef)(((e,t)=>{let{children:r,...s}=e;const i=a.Children.only(r);if(!s.href||"string"!==typeof s.href)throw new Error("No valid href provided for StoryLink");if((0,a.isValidElement)(i))return(0,a.cloneElement)(i,{...s,ref:t});throw new Error("Not valid child of <StoryLink />. Use an <a> or anchor like component")})),l=e=>{let{children:t,...r}=e;const{Link:a}=(0,i.Gr)();return(0,s.jsx)(a,{...r,children:(0,s.jsx)(o,{children:t})})}},6622:function(e,t,r){var s;r.d(t,{V:function(){return s}}),function(e){e.UNLISTED="unlisted"}(s||(s={}))},76033:function(e,t,r){r.d(t,{gi:function(){return v},wz:function(){return h},Vx:function(){return f},j5:function(){return w},Az:function(){return S},mA:function(){return y}});var s=r(52322),a=(r(2784),r(42670)),i=r(48206),o=r(43746),l=r(24782),n=r(53744),c=r(73927),d=r(60305),m=r(51171);const u=e=>window.performance.getEntriesByType("resource").filter((t=>"string"===typeof e?t.name===e:e.test(t.name)));var p=r(39613),b=r(63789),x=r(96934),g=r(83245);const f=async e=>{const t={success:{story:"itemUtils.addFavoriteSuccess.story",frame:"itemUtils.addFavoriteSuccess.frame",collection:"itemUtils.addFavoriteSuccess.collection",briefing:"itemUtils.addFavoriteSuccess.briefing",theme:"itemUtils.addFavoriteSuccess.theme",item:"itemUtils.addFavoriteSuccess.item",webmap:"itemUtils.addFavoriteSuccess.webmap",webscene:"itemUtils.addFavoriteSuccess.webscene"},error:{story:"itemUtils.errorFavoriting.story",frame:"itemUtils.errorFavoriting.frame",collection:"itemUtils.errorFavoriting.collection",briefing:"itemUtils.errorFavoriting.briefing",theme:"itemUtils.errorFavoriting.theme",item:"itemUtils.errorFavoriting.item",webmap:"itemUtils.errorFavoriting.webmap",webscene:"itemUtils.errorFavoriting.webscene"}};try{await(0,o.LZ)({isFavorite:!0,itemId:e.id,authManager:e.authManager,owner:e.owner}),e.toast.add({type:"success",title:(0,s.jsx)(a.Z,{id:t.success[e.itemType]})})}catch(r){throw e.toast.add({type:"error",title:(0,s.jsx)(a.Z,{id:"builder.common.sorry"}),details:(0,s.jsx)(a.Z,{id:t.error[e.itemType]})}),new Error(r)}},y=async e=>{const t={success:{story:"itemUtils.removeFavoriteSuccess.story",frame:"itemUtils.removeFavoriteSuccess.frame",collection:"itemUtils.removeFavoriteSuccess.collection",briefing:"itemUtils.removeFavoriteSuccess.briefing",theme:"itemUtils.removeFavoriteSuccess.theme",item:"itemUtils.removeFavoriteSuccess.item",webmap:"itemUtils.removeFavoriteSuccess.webmap",webscene:"itemUtils.removeFavoriteSuccess.webscene"},error:{story:"itemUtils.errorUnfavoriting.story",frame:"itemUtils.errorUnfavoriting.frame",collection:"itemUtils.errorUnfavoriting.collection",briefing:"itemUtils.errorUnfavoriting.briefing",theme:"itemUtils.errorUnfavoriting.theme",item:"itemUtils.errorUnfavoriting.item",webmap:"itemUtils.errorUnfavoriting.webmap",webscene:"itemUtils.errorUnfavoriting.webscene"}};try{await(0,o.LZ)({isFavorite:!1,itemId:e.id,authManager:e.authManager,owner:e.owner}),e.toast.add({type:"success",title:(0,s.jsx)(a.Z,{id:t.success[e.itemType]})})}catch(r){throw e.toast.add({type:"error",title:(0,s.jsx)(a.Z,{id:"builder.common.sorry"}),details:(0,s.jsx)(a.Z,{id:t.error[e.itemType]})}),new Error(r)}},h=async e=>{const t={[b.o.Story]:(0,s.jsx)(a.Z,{id:"itemUtils.deleteStorySuccess"}),[b.o.Frame]:(0,s.jsx)(a.Z,{id:"itemUtils.deleteFrameSuccess"}),[b.o.Briefing]:(0,s.jsx)(a.Z,{id:"itemUtils.deleteBriefingSuccess"}),[b.o.Collection]:(0,s.jsx)(a.Z,{id:"itemUtils.deleteCollectionSuccess"}),[b.o.Theme]:(0,s.jsx)(a.Z,{id:"itemUtils.deleteThemeSuccess"})}[e.type],r={[b.o.Story]:(0,s.jsx)(a.Z,{id:"itemUtils.errorDeletingStory"}),[b.o.Frame]:(0,s.jsx)(a.Z,{id:"itemUtils.errorDeletingFrame"}),[b.o.Briefing]:(0,s.jsx)(a.Z,{id:"itemUtils.errorDeletingBriefing"}),[b.o.Collection]:(0,s.jsx)(a.Z,{id:"itemUtils.errorDeletingCollection"}),[b.o.Theme]:(0,s.jsx)(a.Z,{id:"itemUtils.errorDeletingTheme"})}[e.type];try{await(0,i.cl)({authentication:e.authManager,id:e.id}),e.toast.add({type:"success",title:t})}catch(o){throw e.toast.add({type:"error",title:(0,s.jsx)(a.Z,{id:"builder.common.sorry"}),details:r}),new Error(o)}},v=async e=>{const t=await(0,n.uX)(e.authManager),r=await(0,x.mI)(e.config.BASE_URL),s=await e.authManager.getUser(),a=await(0,i.fC)({authentication:e.authManager,params:{thumbnail:r},item:(0,x.rV)(e.itemType,e.config,t,s.orgId)}),o=(()=>{switch(e.itemType){case b.o.Story:return(0,x.U_)({firstName:s.firstName,lastName:s.lastName,title:e.title,theme:e.theme,baseThemeId:e.baseThemeId,webmap:e.webmap,webscene:e.webscene,template:e.template,shouldIncludeAuthorCard:e.featureDecisions.canUseAuthorCard,coverType:e.config.INCLUDED_STORY_COVERS[0]});case b.o.Briefing:return(0,x.zb)({firstName:s.firstName,lastName:s.lastName,title:e.title,theme:e.theme,baseThemeId:e.baseThemeId,coverType:e.config.INCLUDED_STORY_COVERS[0]});case b.o.Frame:return(0,x.Fn)();case b.o.Collection:return(0,x.$U)({firstName:s.firstName,lastName:s.lastName,title:e.title,theme:e.theme,baseThemeId:e.baseThemeId});case b.o.Theme:return(e=>{let{baseThemeId:t}=e;const{defaultBaseVariables:r}=(0,g.w8)(t),s={...r};return delete s.colorRamps,{baseThemeId:t,variables:s}})({baseThemeId:e.baseThemeId});default:return{}}})();return e.itemType===b.o.Story&&e.theme&&(await(0,i.bV)({originItemId:e.theme,destinationItemId:a.id,relationshipType:c.t4,authentication:e.authManager}),l.Z.trackEvent(l.Z.Category.Theme,l.Z.Action.Theme_AddRelationshipTheme2Story)),await(0,i.zJ)({authentication:e.authManager,id:a.id,name:"draft.json",resource:(0,d.ds)(o),owner:e.authManager.username,private:!0}),e.itemType===b.o.Story&&(e=>{switch(e.itemType){case b.o.Story:{const t={sidecar:l.Z.Name.QuickStartTemplate_Sidecar,"guided-tour":l.Z.Name.QuickStartTemplate_GuidedTour,explorer:l.Z.Name.QuickStartTemplate_Explorer},r=e.templateForStory?t[e.templateForStory]:l.Z.Name.QuickStartTemplate_Default;r&&l.Z.trackEvent(l.Z.Category.Story,l.Z.Action.Story_CreateNewStory,r),e.hasThemeForStory&&l.Z.trackEvent(l.Z.Category.Story,l.Z.Action.Story_CreateNewStoryWithTheme);break}case b.o.Collection:l.Z.trackEvent(l.Z.Category.Collection,l.Z.Action.Collection_CreateCollection);break;case b.o.Theme:l.Z.trackEvent(l.Z.Category.Theme,l.Z.Action.Theme_CreateNewTheme)}})({itemType:e.itemType,templateForStory:e.template,hasThemeForStory:!!e.theme}),a},w=e=>{const{storyUrl:t,getUrlFromRouteDef:r}=e;return r({route:"report-abuse",storyUrl:(0,m.w3)(t||window.location.href,["play","speed","cover","header"])})},S=e=>{const{itemId:t,portalHost:r,authManager:s,customTracker:a}=e;try{const e=u(new RegExp(`sharing/rest/content/items/${t}/data`)),o=window.performance.now(),l=e.reduce(((e,t)=>{const r=o-t.startTime;return Math.min(r,e)}),1/0);if(0===e.length||isFinite(l)&&l>9999){const e=3e3,o=()=>{var e;(0,i.m_)(t,{authentication:s,portal:(0,p.Zl)(r,s)}),null===(e=a)||void 0===e||e()};"requestIdleCallback"in window?window.requestIdleCallback(o,{timeout:e}):setTimeout(o,e)}}catch{}}},24032:function(e,t,r){r.d(t,{_:function(){return i}});var s=r(28184),a=r(77648);const i=()=>{const{FAVORITE_ICON_SHAPE:e}=(0,s.ZR)();return(0,a.qd)(e)}},92985:function(e,t,r){var s=r(52322),a=r(28505),i=r.n(a),o=(r(2784),r(72779)),l=r.n(o),n=r(14535),c=r(57293),d=r(76653),m=r(9286),u=r(41853);t.Z=e=>{let{label:t,backgroundColor:r,color:a=m.default.color.white,tooltipLabel:o,icon:p,textClassName:b,className:x,screenReaderAccessibleName:g,appendTooltipTo:f}=e;const y=(0,d.pH)({cssSelector:".text",fontWeight:m.default.font.weight.normal}),{productVariables:h}=(0,n.Fj)(),v=(0,s.jsxs)("div",{className:i().dynamic([["126208f34ce40a5",[a,r||"transparent",c.ZP.overflowWrap(),p?"space-between":"center",h.borderRadius.regular,c.ZP.typography.labelSmall(),m.default.spacing.xxxxs,m.default.spacing.xxxs,c.ZP.screenReaderOnly()]]])+" "+(l()("badge",x)||""),children:[p,g&&(0,s.jsx)("div",{className:i().dynamic([["126208f34ce40a5",[a,r||"transparent",c.ZP.overflowWrap(),p?"space-between":"center",h.borderRadius.regular,c.ZP.typography.labelSmall(),m.default.spacing.xxxxs,m.default.spacing.xxxs,c.ZP.screenReaderOnly()]]])+" sr-only",children:g}),t&&(0,s.jsx)("span",{"aria-hidden":!!g,className:i().dynamic([["126208f34ce40a5",[a,r||"transparent",c.ZP.overflowWrap(),p?"space-between":"center",h.borderRadius.regular,c.ZP.typography.labelSmall(),m.default.spacing.xxxxs,m.default.spacing.xxxs,c.ZP.screenReaderOnly()]]])+" "+(l()("badge-text",y.className,b)||""),children:t}),y.styles,(0,s.jsx)(i(),{id:"126208f34ce40a5",dynamic:[a,r||"transparent",c.ZP.overflowWrap(),p?"space-between":"center",h.borderRadius.regular,c.ZP.typography.labelSmall(),m.default.spacing.xxxxs,m.default.spacing.xxxs,c.ZP.screenReaderOnly()],children:`.badge.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:${a};background-color:${r||"transparent"};${c.ZP.overflowWrap()}\n            justify-content: ${p?"space-between":"center"};-webkit-border-radius:${h.borderRadius.regular};-moz-border-radius:${h.borderRadius.regular};border-radius:${h.borderRadius.regular}}.badge-text.__jsx-style-dynamic-selector{display:inline-block;${c.ZP.typography.labelSmall()}\n            vertical-align: middle;padding:${m.default.spacing.xxxxs} ${m.default.spacing.xxxs};overflow:hidden;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.sr-only.__jsx-style-dynamic-selector{${c.ZP.screenReaderOnly()}\n          }`})]});return o?(0,s.jsx)(u.Z,{appendTo:f,tooltipContent:o,children:v}):v}},15081:function(e,t,r){r.d(t,{Z:function(){return f}});var s=r(52322),a=r(28505),i=r.n(a),o=r(2784),l=r(72779),n=r.n(l),c=r(14535),d=r(57293),m=r(9286),u=r(95866),p=r(34321);const b=(0,o.forwardRef)(((e,t)=>{const{theme:r,productVariables:a}=(0,c.Fj)(),l=(0,u.z$)(),b=e.trackingEventData?l.getDataAttributes(e.trackingEventData):{};return(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)("button",{ref:t,role:"tab","data-testid":e.testId,"aria-selected":!!e.isSelected,"aria-label":e.ariaLabel,onClick:e.onClick,onKeyDown:e.onKeyDown,disabled:e.isDisabled,id:e.id,tabIndex:e.tabIndex,...b,className:i().dynamic([["bfc0d81bd76a4ced",[r.colors.labelPrimary,m.default.spacing.xxxxs,m.default.spacing.xxxxxs,d.ZP.typography.labelLarge(),r.colors.labelDisabled,p._.userIsNotTabbing,m.default.responsiveBreakpoints.large,r.colors.outlineSubduedHover,r.colors.outlineActive,r.colors.surfaceDefault,a.borderRadius.regular,m.default.spacing.xxxxs,m.default.spacing.xxxs,r.colors.labelSecondary,d.ZP.typography.bodySmall(),r.colors.surfaceActive,r.colors.labelPrimary,r.colors.surfaceHover]]])+" "+(b&&null!=b.className&&b.className||n()("tab",`type-${e.type}`,e.className)||""),children:e.children}),(0,s.jsx)(i(),{id:"bfc0d81bd76a4ced",dynamic:[r.colors.labelPrimary,m.default.spacing.xxxxs,m.default.spacing.xxxxxs,d.ZP.typography.labelLarge(),r.colors.labelDisabled,p._.userIsNotTabbing,m.default.responsiveBreakpoints.large,r.colors.outlineSubduedHover,r.colors.outlineActive,r.colors.surfaceDefault,a.borderRadius.regular,m.default.spacing.xxxxs,m.default.spacing.xxxs,r.colors.labelSecondary,d.ZP.typography.bodySmall(),r.colors.surfaceActive,r.colors.labelPrimary,r.colors.surfaceHover],children:`.tab.__jsx-style-dynamic-selector{color:${r.colors.labelPrimary};padding:1.2rem ${m.default.spacing.xxxxs};-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;--border-thickness:${m.default.spacing.xxxxxs};outline-offset:-(var(--border-thickness));border-bottom:var(--border-thickness)solid transparent;${d.ZP.typography.labelLarge()}\n        }.tab[disabled].__jsx-style-dynamic-selector{color:${r.colors.labelDisabled}}${p._.userIsNotTabbing} .tab.__jsx-style-dynamic-selector:focus{outline:none}@media(min-width:${m.default.responsiveBreakpoints.large}){.tab.__jsx-style-dynamic-selector{-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}}.type-icon.__jsx-style-dynamic-selector{padding:1rem;height:100%}.type-tab[aria-selected="false"].__jsx-style-dynamic-selector:not([disabled]):hover,.type-icon[aria-selected="false"].__jsx-style-dynamic-selector:not([disabled]):hover{border-bottom-color:${r.colors.outlineSubduedHover}}.type-tab[aria-selected="true"].__jsx-style-dynamic-selector:not([disabled]),.type-icon[aria-selected="true"].__jsx-style-dynamic-selector:not([disabled]){border-bottom-color:${r.colors.outlineActive}}.type-tab.__jsx-style-dynamic-selector:is(:hover,:focus,:active),.type-icon.__jsx-style-dynamic-selector:is(:hover,:focus,:active){background-color:transparent}.type-pill.__jsx-style-dynamic-selector{background-color:${r.colors.surfaceDefault};-webkit-border-radius:${a.borderRadius.regular};-moz-border-radius:${a.borderRadius.regular};border-radius:${a.borderRadius.regular};padding:${m.default.spacing.xxxxs} ${m.default.spacing.xxxs};color:${r.colors.labelSecondary};border:none;${d.ZP.typography.bodySmall()}\n        }.type-pill[aria-selected="true"].__jsx-style-dynamic-selector{background:${r.colors.surfaceActive};color:${r.colors.labelPrimary}}.type-pill[aria-selected="false"].__jsx-style-dynamic-selector:not([disabled]):hover{background-color:${r.colors.surfaceHover}}`})]})}));b.defaultProps={isSelected:!1,isDisabled:!1,type:"tab",tabIndex:0};var x=b;const g=e=>{const{theme:t}=(0,c.Fj)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{role:"tablist",className:i().dynamic([["c4db32362e3fb99a",[t.colors.outlineSubduedDefault]]])+" "+(n()("tab-bar",e.className)||""),children:(()=>{const{className:t,styles:r}={styles:(0,s.jsx)(i(),{id:"6381125a78b6472c",dynamic:[d.ZP.overflowWrap(),e.gap??m.default.spacing.xs],children:`.tab-bar-tab.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 1 auto;-moz-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto;${d.ZP.overflowWrap()}\n      }.tab-bar-tab.__jsx-style-dynamic-selector:not(:first-child){-webkit-margin-start:${e.gap??m.default.spacing.xs};-moz-margin-start:${e.gap??m.default.spacing.xs};margin-inline-start:${e.gap??m.default.spacing.xs}}`}),className:i().dynamic([["6381125a78b6472c",[d.ZP.overflowWrap(),e.gap??m.default.spacing.xs]]])},a=o.Children.map(e.children,(e=>{var r,s;const a=null===(s=e)||void 0===s||null===(r=s.props)||void 0===r?void 0:r.className;return(0,o.isValidElement)(e)?(0,o.cloneElement)(e,{...e.props,className:n()(t,"tab-bar-tab",a)}):null}));return(0,s.jsxs)(s.Fragment,{children:[a,r]})})()}),e.shouldIncludeBottomDivider&&(0,s.jsx)("div",{className:i().dynamic([["c4db32362e3fb99a",[t.colors.outlineSubduedDefault]]])+" bottom-divider"}),(0,s.jsx)(i(),{id:"c4db32362e3fb99a",dynamic:[t.colors.outlineSubduedDefault],children:`.tab-bar.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.bottom-divider.__jsx-style-dynamic-selector{border-bottom:.1rem solid ${t.colors.outlineSubduedDefault};margin-top:-.1rem}`})]})};g.defaultProps={shouldIncludeBottomDivider:!0},g.Tab=x;var f=g}}]);