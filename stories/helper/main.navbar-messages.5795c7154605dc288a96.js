(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1061:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var a=n(63),r={400:"请求参数有误",401:"用户认证失败",403:"服务已拒绝",404:"资源不存在",405:"请求方式有误",410:"资源已解散",502:"网关错误",503:"服务无响应",504:"网关超时"},c=function(e){var t;return(null==e||null===(t=e.payload)||void 0===t?void 0:t.message)||(null==e?void 0:e.status)&&r[e.status]||"操作失败"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.a.dispatch("ui/showToast",{icon:"fail",text:c(e)})}},1062:function(e,t,n){var a=n(581),r=n(260),c=n(258),i=n(93),o=n(209),s=n(259),l=n(257),u=n(327),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||s(e)||u(e)||c(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(l(e))return!a(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},1063:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var a=n(1124);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return a.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return a.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return a.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return a.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return a.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return a.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return a.stripHTML}})},1123:function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},c=Object.defineProperty,i=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var p=l(n);p&&p!==u&&e(t,p,d)}var h=i(n);o&&(h=h.concat(o(n)));for(var f=0;f<h.length;++f){var m=h[f];if(!(a[m]||r[m]||d&&d[m])){var b=s(n,m);try{c(t,m,b)}catch(e){}}}return t}return t}},1124:function(e,t,n){"use strict";var a=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var r=["img","br"],c=/([\w|-]+)(?:="([^"]*)")?/;function i(e){var t={};if((e=e.trim()).length)for(var n,r=new RegExp(c.source,"g");n=r.exec(e);){var i=n.slice(1),o=a(i,2),s=o[0],l=o[1];t[s]=l}return t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a(e,5),c=n[0],o=n[1],s=n[2],l=n[3],u=n[4],d="open";"/"===o?d="close":(r.includes(s)||"/"===u)&&(d="self-close");var p=t.parseAttrs?i(l):l;return{tagHTML:c,tagName:s,tagType:d,attrs:p}}function s(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function l(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"invisible":return{type:"hide"};default:return null}}function u(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=i,t.parseTagGroup=o,t.parseTag=function(e,n){var a=t.TAG_RE.exec(e);if(a)return o(a,n)},t.getBlockType=s,t.truncateHTML=function(e){for(var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=c.endsWith,d=void 0===i?"…":i,p=c.placeholders,h=void 0===p?{}:p,f=[],m=[],b=[],v={},g={},O=new RegExp(t.TAG_RE.source,"g"),j=0,y=0,w=0,E=0,M=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f.push(e),t||(j+=e.length),y+=e.length};n=O.exec(e);){var k=o(n,{parseAttrs:!0}),C=k.tagHTML,x=k.tagType,R=k.tagName,T="close"===x&&r.includes(R)?"invalid":s("close"!==x?k:m[m.length-1]),S=h[T]?{type:"replace",content:h[T]}:l(T);"close"!==x&&(v[T]=(v[T]||0)+1);var I=e.slice(y,n.index),z=I.length;if(j+z>=a&&0===w&&0===E){for(M(I.slice(0,a-j));b.length;){var A=b.pop();f.push("</".concat(A.tagName,">"))}break}0===w&&M(I,0!==E),"invalid"!==T&&("open"===x?m.push(k):"close"===x&&m.pop(),S?("replace"===S.type&&(0===w&&"close"!==x&&f.push(S.content),"open"===x?w++:"close"===x&&w--),0===w&&"replace-self"===S.type&&f.push(S.content),0===w&&"hide"===S.type&&("open"===x?E++:"close"===x&&E--,f.push(C))):0===w&&(f.push(C),"open"===x?b.push(k):"close"===x&&b.pop())),"video-box"!==T||g.type||"string"==typeof k.attrs||(g.type="video",g.url=k.attrs["data-poster"],g.id=k.attrs["data-lens-id"]),y=O.lastIndex}if(j<a){var _=e.slice(y).slice(0,a-j);M(_)}var N=j>a||j===a&&y<e.length||u(v);return{isTruncated:N,thumbnailInfo:g,content:"".concat(f.join("").trim().replace(/\s{2,}/g," ")).concat(N?d:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1151:function(e,t,n){"use strict";var a=n(40),r=n(2),c=n(73),i=n.n(c),o=n(7),s=n(152),l=n(4),u=n(114);function d(e){return e.reduce((function(e,t){var n;return[].concat(Object(l.a)(e),Object(l.a)(null!==(n=t.stickers)&&void 0!==n?n:[]))}),[])}var p=function(){return window.zh_emoticon?Promise.resolve(d(window.zh_emoticon)):Object(u.loadScript)("https://unpkg.zhimg.com/@cfe/emoticon@1.2.2/lib/emoticon.js").then((function(){return window.zh_emoticon?d(window.zh_emoticon):[]}))},h=n(1);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return i()((function(t){var c=Object(h.useState)(!1),i=Object(a.a)(c,2),l=i[0],u=i[1];return Object(h.useEffect)((function(){Object(s.c)()?u(!0):p().then((function(e){Object(s.e)(Object(o.camelizeKeys)(e)),u(!0)})).catch((function(){u(!0)}))}),[]),(l||n)&&Object(r.b)(e,Object.assign({},t))}),e)}}},1155:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(18),i=function(e){return r.a.createElement(c.a,e,r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"id-3811055512-a",x1:"11.015%",x2:"87.655%",y1:"18.594%",y2:"96.14%"},r.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),r.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),r.a.createElement("path",{fill:"url(#id-3811055512-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};i.defaultProps={name:"VIP"},t.a=i},1156:function(e,t,n){"use strict";var a=n(13),r=n(14),c=n(67),i=n(15),o=n(16),s=n(9),l=n(2),u=n(1),d=n(25),p=n(29),h=n(74),f=n(120),m=n(26);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var v=function(e){Object(i.a)(n,e);var t=b(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).handleShieldUser=e.handleShieldUser.bind(Object(c.a)(e)),e}return Object(r.a)(n,[{key:"handleShieldUser",value:function(){var e=this.props,t=e.dispatch,n=e.user.urlToken,a=e.onClose;t(Object(f.n)(n,!0)).then((function(){return t(Object(m.h)("屏蔽成功"))})),a()}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.shown,a=e.user;return Object(l.b)(h.b,{onClose:t,title:"确定要屏蔽".concat(a.name,"？"),children:n&&Object(l.c)("div",{children:["屏蔽后，对方将不能关注你、向你发私信、评论你的实名回答、使用「@」提及你、邀请你回答问题，但仍然可以查看你的公开信息。",Object(l.c)(h.a,{direction:"horizontal",children:[Object(l.b)(p.c,{onClick:t,color:"grey",children:"取消"}),Object(l.b)(p.c,{preset:"primary",color:"blue",onClick:this.handleShieldUser,children:"确定"})]})]})})}}]),n}(u.Component);t.a=Object(d.connect)()(v)},1161:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return y}));var a=n(2),r=n(1),c=n(392),i=n(1294),o=n(13),s=n(14),l=n(15),u=n(16),d=n(9),p=n(3),h=n.n(p),f=n(11),m=n.n(f);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(d.a)(e);if(t){var r=Object(d.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var v=function(e){Object(l.a)(n,e);var t=b(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.showReport,n=e.className,r=e.onReportClick,c=e.onMessageDelete;return Object(a.c)("ul",{className:m()("ActionMenu",n),children:[Object(a.b)("li",{className:"ActionMenu-item",onClick:c,children:"删除"}),t&&Object(a.b)("li",{className:"ActionMenu-item",onClick:r,children:"举报"})]})}}]),n}(r.Component);v.propsTypes={className:h.a.string,showReport:h.a.bool,onMessageDelete:h.a.func.isRequired,onReportClick:h.a.func.isRequired};var g=function(e,t){var n=e.isOpen,o=e.onToggleMenu,s=e.onDeleteClick,l=e.onReportClick,u=e.showReport;Object(r.useEffect)((function(){if(n)return window.addEventListener("wheel",o),function(){window.removeEventListener("wheel",o)}}),[n,o]);var d=Object(r.useCallback)((function(e){e.stopPropagation(),o()}),[o]);return Object(a.c)(a.a,{children:[Object(a.b)("button",{type:"button",onClick:d,"aria-label":"更多",ref:t,className:"Chat-ActionMenuPopover-Button",children:Object(a.b)(i.a,{className:"Message-status--more"})}),Object(a.b)(c.a,{isOpen:n,fixed:!0,arrowed:!0,target:null==t?void 0:t.current,children:Object(a.b)(v,{onMessageDelete:s,onReportClick:l,showReport:u})})]})},O=Object(r.forwardRef)(g),j=n(40),y=function(e){var t=e.handleDeleteClick,n=e.handleReportClick,c=e.showReport,i=Object(r.useState)(!1),o=Object(j.a)(i,2),s=o[0],l=o[1],u=Object(r.useRef)(),d=Object(r.useCallback)((function(){l((function(e){return!e}))}),[]),p=Object(r.useCallback)((function(){l(!1)}),[]),h=function(e){s&&u.current&&!u.current.contains(e.target)&&(l(!1),e.stopPropagation(),e.preventDefault())};return Object(r.useEffect)((function(){return document.addEventListener("click",h),function(){document.removeEventListener("click",h)}}),[s]),{popover:Object(a.b)(O,{ref:u,isOpen:s,onToggleMenu:d,onDeleteClick:t,onReportClick:n,showReport:c}),handleMouseLeave:p}}},1164:function(e,t,n){"use strict";var a=n(13),r=n(14),c=n(15),i=n(16),o=n(9),s=n(2),l=n(1),u=n(25),d=n(440),p=n(136),h=n(437),f=n(37);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var b=function(e){Object(c.a)(n,e);var t=m(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).handleReceiveMessage=function(t){var n=e.props;(0,n.handleReceiveMessage)(t,n.currentUser.id)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentUser,n=e.setChatMqttStatus,a=e.isChatMqttExisted;t&&"guest"!==t.userType&&(a||(Object(d.a)([{name:"zhihu/message/v1/im/user/".concat(t.id,"/"),onMessage:this.handleReceiveMessage}]),n(!0)))}},{key:"render",value:function(){var e=this.props.children;return Object(s.b)("div",{children:e})}}]),n}(l.Component);t.a=Object(u.connect)((function(e){return{currentUser:Object(f.b)(e),isChatMqttExisted:e.chat.global.isChatMqttExisted}}),{handleReceiveMessage:p.l,setChatMqttStatus:h.b})(b)},1165:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(18),i=function(e){return r.a.createElement(c.a,e,r.a.createElement("path",{d:"M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"}))};i.defaultProps={name:"Edit"},t.a=i},1269:function(e,t,n){"use strict";var a=n(13),r=n(14),c=n(15),i=n(16),o=n(9),s=n(2),l=n(1),u=n.n(l),d=n(25),p=n(3),h=n.n(p),f=n(11),m=n.n(f),b=n(19),v=n(376),g=n(370),O=n(136),j=n(1151),y=n(40),w=n(29),E=n(74),M=n(66),k=n(373),C=n(61),x="3d198a56310c02c4a83efb9f4a4c027e",R=["https://www.zhihu.com/staffService/"+x];var T=Object(l.createContext)({showModal:!1,setShowModal:function(){return null}});function S(e){var t=e.item,n=e.selected,a=e.onClick,r=Object(M.c)((function(){return a(t)}));return Object(s.b)(w.c,{label:t.name,color:n?w.a.Blue:w.a.Grey,preset:w.b.Secondary,css:{marginRight:"8px"},onClick:r},t.id)}function I(e){var t=e.senderId,n=e.showModal,a=e.onClose,r=Object(l.useState)([]),c=Object(y.a)(r,2),i=c[0],o=c[1],u=Object(l.useState)(null),p=Object(y.a)(u,2),h=p[0],f=p[1],m=Object(d.useDispatch)(),b=Object(k.b)();Object(l.useEffect)((function(){n&&b("/api/v4/customer_service/question_tag",{ignoreCode:!0}).then((function(e){var t;o((null===(t=e.payload)||void 0===t?void 0:t.data)||[])})).catch((function(){return null}))}),[n,b]);var v=Object(M.c)(Object(M.b)((function(e){b("/api/v4/customer_service/choose_question_tag",{method:"POST",body:{adminId:x,tagId:e.id},ignoreCode:!0}).catch((function(){return null})),m(Object(O.p)({contentType:C.a.text,receiverId:t,data:{text:e.name}})),a(),f(null)}),300)),g=Object(M.c)((function(e){f(e.id),v(e)}));return Object(s.b)(E.b,{css:{width:"694px",".Modal-content":{padding:"0 0 55px 0",marginTop:0}},onClose:a,children:n&&Object(s.c)(s.a,{children:[Object(s.b)("div",{css:function(e){return{padding:"12px 0 10px 20px",fontSize:"20px",lineHeight:"28px",borderBottom:"1px solid "+e.colors.GBK09A,color:e.colors.GBK02A}},children:"选个问题类型，小管家为你解答"}),i.map((function(e){return Object(s.c)(l.Fragment,{children:[Object(s.b)("div",{css:function(e){return{marginTop:"20px",paddingLeft:"20px",fontSize:"15px",lineHeight:"18px",color:e.colors.GBK03A}},children:e.categoryName}),Object(s.b)("div",{css:{marginTop:"16px",paddingLeft:"20px"},children:e.items.map((function(e){return Object(s.b)(S,{item:e,selected:h===e.id,onClick:g},e.id)}))})]},e.categoryId)}))]})})}var z=n(0),A=n(1275),_=n(175),N=n(240),P=n(987),B=n(941),L=n(242),D=n(1156),H=n(924),V=n(90),F=n(28),U=function(e){var t=e.message,n=Object(l.useRef)(),a=Object(l.useState)(!1),r=Object(y.a)(a,2),c=r[0],i=r[1];return Object(s.b)(V.Text,{ref:n,color:c?"inherit":"primary",css:{cursor:c?"text":"pointer"},onClick:function(){c||(i(!0),F.a.trackEvent(n.current,{action:"Click",id:6880}))},dangerouslySetInnerHTML:{__html:c?t.richText||t.text:t.extraContent}})};var G=function(e){var t=e.message,n=e.senderId,a=e.sendMessage,r=Object(M.c)((function(e){if("A"===e.target.tagName&&e.target.href){var t=e.target.href,r=Object(H.parse)(t.split("?")[1]).message,c=t.match(/www.zhihu.com\/inbox\/([\d\w]+)/);(null==c?void 0:c[1])&&n===c[1]&&(e.preventDefault(),a({contentType:C.a.text,receiverId:n,data:{text:r}}))}}));return Object(s.b)("div",{className:m()("TextMessage",{"TextMessage-sender":"sender"===t.userType,"TextMessage-receiver":"receiver"===t.userType}),children:t.unfriendly&&"sender"===t.userType?Object(s.b)(U,{message:t}):Object(s.b)(V.Text,{onClick:r,dangerouslySetInnerHTML:{__html:t.richText||t.text}})})},q=n(879),K=n(150);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var Y=function(e){Object(c.a)(n,e);var t=W(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={previewImg:null,imageUrl:e.props.image.url},e.getImageStyle=function(){var t=e.props.image,n=t.width,a=t.height,r=a/n;return a>C.d||n>C.d?r>1?{height:"".concat(C.d,"px"),minWidth:"".concat(C.g,"px")}:r<1?{width:"".concat(C.d,"px"),minHeight:"".concat(C.g,"px"),height:C.d*r}:{height:"".concat(C.d,"px"),width:"".concat(C.d,"px")}:{maxWidth:"".concat(C.d,"px"),maxHeight:"".concat(C.d,"px"),width:n,height:a}},e.isTempUrl=function(e){return e.startsWith("blob")},e.handleImageClick=function(t){var n=e.state.imageUrl;e.isTempUrl(n)||e.setState({previewImg:t.target})},e}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.image.url,n=this.state.imageUrl;t!==n&&Object(K.loadImage)(t).then((function(){e.setState({imageUrl:t}),URL.revokeObjectURL(n)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.imageUrl,a=t.previewImg;return Object(s.c)("div",{children:[Object(s.b)("img",{className:m()("ImageMessage",{"ImageMessage--temp":this.isTempUrl(n)}),src:Object(K.imgUrl)(n,"hd"),onClick:this.handleImageClick,style:this.getImageStyle()}),a&&Object(s.b)(q.a,{className:"ImageMessage-ImageView",img:a,onClose:function(){return e.setState({previewImg:null})}})]})}}]),n}(l.Component);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}Y.propTypes={image:h.a.shape({width:h.a.number,height:h.a.number,url:h.a.string})};var Q=function(e){Object(c.a)(n,e);var t=J(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.sticker.url;return Object(s.b)("img",{className:"StickerMessage",src:Object(K.imgUrl)(e,"xl")})}}]),n}(l.Component);Q.propTypes={sticker:h.a.shape({id:h.a.string,url:h.a.string})};var Z=n(7),X=n(942),$=n(234),ee=n(863),te=function(e){var t=e.result,n=e.isInMessage,a=e.onClick,r=t.name,c=t.coverPath,i=void 0===c?"https://i1.wp.com/pic4.zhimg.com/80/v2-231f5c4e7db8b6c08493a220be85705e_hd.png?ssl=1":c,o=t.className,s=void 0===o?"":o,l=t.intro;return u.a.createElement("div",{className:m()("KfeCollection-MessageEventCard",s,{"KfeCollection-MessageEventCard--InMessage":n}),onClick:a},u.a.createElement("img",{src:i,className:"KfeCollection-MessageEventCard-cover"}),u.a.createElement("div",{className:"KfeCollection-MessageEventCard-content"},u.a.createElement("div",{className:"KfeCollection-MessageEventCard-title"},r),u.a.createElement("div",{className:"KfeCollection-MessageEventCard-text"},l)))},ne=function(e){var t=e.result,n=e.onClick,a=e.isInMessage,r=void 0!==a&&a,c=e.hasClickZA,i=void 0===c||c,o=t.token,s=t.id;return u.a.createElement($.b,{block:"EcomMessageEventCard",content:{type:ee.e.event,id:s}},u.a.createElement($.e,{shouldTrackClick:i,zaType:"Card",zaAction:"Unknown",zaText:"留资卡片",zaEventType:"Unknown",onClick:function(e){i&&F.a.trackEvent(e.target,{id:r?9970:10048,action:"Click",name:"留资卡片"}),n(o)}},u.a.createElement(X.a,{options:[{},r?{card:{content:{id:String(s)}}}:{},{id:r?9968:10046,name:"留资卡片"}]},u.a.createElement(te,{result:t,isInMessage:r}))))};ne.propTypes={className:h.a.string,result:h.a.object.isRequired,extra:h.a.shape({ua:h.a.object,theme:h.a.string}).isRequired};var ae=ne,re=n(57),ce=n.n(re),ie=n(128),oe=n(588);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ue,de=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(ue=oe.props)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(ue)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),["sx","variant"]),pe=new RegExp("^(".concat(de.join("|"),")$")),he=/^m[trblxy]?$/,fe=function(e){return function(t){var n={};for(var a in t)e(a||"")&&(n[a]=t[a]);return n}},me=fe((function(e){return pe.test(e)})),be=fe((function(e){return he.test(e)})),ve=fe((function(e){return!he.test(e)})),ge=function(e){e.size;var t=le(e,["size"]);return u.a.createElement(ie.Box,se({as:"svg",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentcolor"},t))},Oe=(Object(l.forwardRef)((function(e,t){return u.a.createElement(ie.Flex,se({ref:t,as:"label",tx:"forms",variant:"label"},e,{__css:{width:"100%"}}))})),Object(l.forwardRef)((function(e,t){return u.a.createElement(ie.Box,se({ref:t,as:"input",type:"text",tx:"forms",variant:"input"},e,{__css:{display:"block",width:"100%",p:2,appearance:"none",fontSize:"inherit",lineHeight:"inherit",border:"1px solid",borderRadius:"default",color:"inherit",bg:"transparent"}}))}))),je=function(e){return u.a.createElement(ge,e,u.a.createElement("path",{d:"M7 10l5 5 5-5z"}))},ye=(Object(l.forwardRef)((function(e,t){return u.a.createElement(ie.Flex,be(e),u.a.createElement(ie.Box,se({ref:t,as:"select",tx:"forms",variant:"select"},ve(e),{__css:{display:"block",width:"100%",p:2,appearance:"none",fontSize:"inherit",lineHeight:"inherit",border:"1px solid",borderRadius:"default",color:"inherit",bg:"transparent"}})),u.a.createElement(je,{sx:{ml:-28,alignSelf:"center",pointerEvents:"none"}}))})),Object(l.forwardRef)((function(e,t){return u.a.createElement(ie.Box,se({ref:t,as:"textarea",tx:"forms",variant:"textarea"},e,{__css:{display:"block",width:"100%",p:2,appearance:"none",fontSize:"inherit",lineHeight:"inherit",border:"1px solid",borderRadius:"default",color:"inherit",bg:"transparent"}}))})),function(e){return u.a.createElement(ge,e,u.a.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))}),we=function(e){return u.a.createElement(ge,e,u.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))},Ee=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(ye,se({},e,{__css:{display:"none","input:checked ~ &":{display:"block"}}})),u.a.createElement(we,se({},e,{__css:{display:"block","input:checked ~ &":{display:"none"}}})))},Me=(Object(l.forwardRef)((function(e,t){var n=e.className,a=e.sx,r=e.variant,c=void 0===r?"radio":r,i=le(e,["className","sx","variant"]);return u.a.createElement(ie.Box,null,u.a.createElement(ie.Box,se({ref:t,as:"input",type:"radio"},i,{sx:{position:"absolute",opacity:0,zIndex:-1,width:1,height:1,overflow:"hidden"}})),u.a.createElement(ie.Box,se({as:Ee,"aria-hidden":"true",tx:"forms",variant:c,className:n,sx:a},me(i),{__css:{mr:2,borderRadius:9999,color:"gray","input:checked ~ &":{color:"primary"},"input:focus ~ &":{bg:"highlight"}}})))})),function(e){return u.a.createElement(ge,e,u.a.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}),ke=function(e){return u.a.createElement(ge,e,u.a.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))},Ce=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(Me,se({},e,{__css:{display:"none","input:checked ~ &":{display:"block"}}})),u.a.createElement(ke,se({},e,{__css:{display:"block","input:checked ~ &":{display:"none"}}})))},xe=(Object(l.forwardRef)((function(e,t){var n=e.className,a=e.sx,r=e.variant,c=void 0===r?"checkbox":r,i=le(e,["className","sx","variant"]);return u.a.createElement(ie.Box,null,u.a.createElement(ie.Box,se({ref:t,as:"input",type:"checkbox"},i,{sx:{position:"absolute",opacity:0,zIndex:-1,width:1,height:1,overflow:"hidden"}})),u.a.createElement(ie.Box,se({as:Ce,"aria-hidden":"true",tx:"forms",variant:c,className:n,sx:a},me(i),{__css:{mr:2,borderRadius:4,color:"gray","input:checked ~ &":{color:"primary"},"input:focus ~ &":{color:"primary",bg:"highlight"}}})))})),Object(l.forwardRef)((function(e,t){var n=se({},e);return u.a.createElement(ie.Box,se({ref:t,as:"input",type:"range",tx:"forms",variant:"slider"},n,{__css:{display:"block",width:"100%",height:4,my:2,cursor:"pointer",appearance:"none",borderRadius:9999,color:"inherit",bg:"gray",":focus":{outline:"none",color:"primary"},"&::-webkit-slider-thumb":{appearance:"none",width:16,height:16,bg:"currentcolor",border:0,borderRadius:9999,variant:"forms.slider.thumb"}}}))})),Object(l.forwardRef)((function(e,t){var n=e.checked,a=le(e,["checked"]);return u.a.createElement(ie.Box,se({ref:t,as:"button",type:"button",role:"switch",tx:"forms",variant:"switch","aria-checked":n},a,{__css:{appearance:"none",m:0,p:0,width:40,height:24,color:"primary",bg:"transparent",border:"1px solid",borderColor:"primary",borderRadius:9999,"&[aria-checked=true]":{bg:"primary"},":focus":{outline:"none",boxShadow:"0 0 0 2px"}}}),u.a.createElement(ie.Box,{"aria-hidden":!0,style:{transform:n?"translateX(16px)":"translateX(0)"},sx:{mt:"-1px",ml:"-1px",width:24,height:24,borderRadius:9999,border:"1px solid",borderColor:"primary",bg:"background",transitionProperty:"transform",transitionTimingFunction:"ease-out",transitionDuration:"0.1s",variant:"forms.switch.thumb"}}))})),function(e){var t=e.className,n=void 0===t?"":t,a=e.eventData,r=e.onClose,c=e.onSubmit,i=e.extra,o=a.token,s=a.name,d=a.intro,p=a.submitText,h=i.originPhone,f=Object(l.useState)(h),b=ce()(f,2),v=b[0],g=b[1],O=function(e){F.a.trackEvent(e.target,{id:9972,action:"Submit"}),c({token:o,phone:v})};return u.a.createElement($.b,{block:"EcomMessageEventModal",content:{type:ee.e.event}},u.a.createElement($.e,{zaText:"留资卡片",zaType:"Popup"},u.a.createElement(X.a,{options:[{},{},{id:9971,name:"留资卡片"}]},u.a.createElement(E.b,{title:s,onClose:r,className:m()("KfeCollection-MessageEventModal",n),key:o},u.a.createElement("div",{className:"KfeCollection-MessageEventModal-intro"},d),u.a.createElement(Oe,{className:"KfeCollection-MessageEventModal-phone",placeholder:"点击输入用户手机号码",value:v,onChange:function(e){g(e.target.value)},fontSize:"14px",color:"GBK02A",width:"100%"}),u.a.createElement("div",{className:"KfeCollection-MessageEventModal-buttonGroup"},u.a.createElement($.a,{zaType:"Button",zaAction:"Unknown",zaText:"取消",onClick:function(e){F.a.trackEvent(e.target,{id:9972,action:"Cancel"}),r()}},u.a.createElement(w.c,{className:"KfeCollection-MessageEventModal-cancelButton"},"取消")),v?u.a.createElement($.a,{zaType:"Button",zaAction:"Unknown",zaText:p||"确认报名"},u.a.createElement(w.c,{onClick:O,preset:w.b.Primary,color:w.a.Blue,type:"submit"},p||"确认报名")):u.a.createElement(w.c,{onClick:O,disabled:!v,preset:w.b.Primary,color:w.a.Blue,type:"submit"},p||"确认报名"))))))});xe.propTypes={className:h.a.string,eventData:h.a.object.isRequired,extra:h.a.shape({ua:h.a.object,theme:h.a.string,originPhone:h.a.any}).isRequired,onClose:h.a.func,onSubmit:h.a.func};var Re=xe,Te=n(1061),Se=n(26),Ie=function(e){var t=e.senderId,n=e.message,a=e.isEcomMerchant,r=Object(d.useDispatch)(),c=Object(d.useSelector)((function(e){var t;return null===(t=e.account.accountInfo)||void 0===t?void 0:t.phoneNo})),i=Object(l.useState)({}),o=Object(y.a)(i,2),u=o[0],p=o[1],h=Object(l.useState)(!1),f=Object(y.a)(h,2),m=f[0],b=f[1],v=Object(l.useMemo)((function(){return Object(Z.camelizeKeys)(n)}),[n]),g=v.ecomCard,j=void 0===g?{}:g,w=Object(l.useMemo)((function(){return function(e){var t,n=e.data,a=void 0===n?{}:n,r=e.title;return{cardData:Object.assign({},a,{name:a.name||r,coverPath:a.cover}),sendModalData:Object.assign({},a,{name:a.name||r,submitText:null==a||null===(t=a.formFields)||void 0===t?void 0:t.submitText})}}(j)}),[j]),E=function(){b(!1)};return Object(s.c)(s.a,{children:[1===j.cardType&&Object(s.b)(ae,{result:Object.assign({},w.cardData,{id:v.id}),extra:{},isInMessage:!0,hasClickZA:!a||a&&"sender"===n.userType,onClick:function(){return e={type:"event",info:w.sendModalData,camelMessage:v},t=e.info,void(a&&"receiver"===n.userType?r(Object(Se.h)("商家不能参与自己发起的活动哦")):(p(Object.assign({},t)),b(!0)));var e,t}}),2===j.cardType&&Object(s.b)(G,{message:Object.assign({},n,{text:"web 上暂不支持优惠券消息，请至 app 查看"})}),m&&Object(s.b)(Re,{eventData:u,extra:{originPhone:c},onSubmit:function(e){return function(e){var n=e.cardType,a=e.modalData;if(1===n){var c=a.token,i=a.phone,o={receiverId:t,phone:i};r(Object(O.o)({contentType:"ecomcard",token:c,data:o})).then((function(){E()})).catch(Te.a)}}({cardType:1,modalData:e})},onClose:E})]})},ze=n(368),Ae=function(e){return new RegExp(/https:\/\/www.zhihu.com\/inbox\/+[\s\S]*?is_ecom=1/).test(e)};var _e=function(e){var t=e.senderId,n=e.message,a=e.isEcomMerchant,r=void 0!==a&&a,c=Object(d.useDispatch)(),i=Object($.i)().trackEvent,o=Object(l.useState)(""),u=Object(y.a)(o,2),p=u[0],h=u[1],f=Object(M.c)((function(e){if(!e)return"";var t=(new DOMParser).parseFromString(e,"text/html"),n=t.querySelectorAll("a");if(!n.length)return"";n.forEach((function(e){Ae(e.href)&&e.setAttribute("data-za-not-track-link",!0)})),h(t.querySelector("body").innerHTML)}));Object(l.useEffect)((function(){f(n.richText||n.text)}),[f,n]);var b=Object(M.c)((function(e){var a,o,s,l,u=e.target,d=u.tagName,p=u.href;if("A"===d){if(p&&!Ae(p))return;if(e.stopPropagation(),e.preventDefault(),r&&"receiver"===n.userType)return void c(Object(Se.h)("您不可以点击自己的卡片哦"));F.a.trackEvent(e.target,{id:9969,action:"Click",name:"欢迎语卡片"},{module:[{card:{content:{type:"Message",id:String(n.id)}}}]}),i({block:"EcomWelcome",action:"Unknown",eventType:"Click",elementLocation:{type:"Text",content:{type:"Message",id:n.id}}}),a=e,s=n.id,l=n.contentType,c(Object(O.p)({contentType:l,receiverId:t,data:(o={},Object(z.a)(o,l,n[l]),Object(z.a)(o,"text",a.target.text||"问题等待配置"),o),tempMessageId:s}))}}));return Object(s.b)("div",{className:m()("TextMessage","EcomWelcomeTextMessage",{"TextMessage-sender":"sender"===n.userType,"TextMessage-receiver":"receiver"===n.userType}),children:Object(s.b)($.b,{block:"MessageEcomWelcomeCard",content:{type:"Message",id:n.id},children:Object(s.b)($.e,{zaType:"Card",zaAction:"Unknown",zaText:"交付欢迎语卡片",zaEventType:"Unknown",onClick:b,children:Object(s.b)(ze.a,{trackCardShow:!0,view:{id:9968,name:"欢迎语卡片"},extra:{module:[{card:{content:{id:String(n.id)}}}]},children:Object(s.b)(V.Text,{dangerouslySetInnerHTML:{__html:p}})})})})})},Ne=n(176),Pe=function(e){return(new Date).getTime()-Number(e)<864e5?Object(Ne.toSmartString)(e):Object(Ne.toAbsoluteDateTimeString)(e)},Be=function(e){var t=e.time;if(!t)return null;var n=new Date(t);return Object(s.b)("time",{dateTime:n.toISOString(),children:Pe(n)})},Le=Object(l.memo)(Be),De=function(e){var t=e.message,n=e.onRequestReport,a=e.onRequestBlock,r=Object(l.useRef)(),c=Object(l.useContext)(T),i=c.showModal,o=c.setShowModal;return Object(s.b)(V.Text,{ref:r,m:"20px auto",p:"10px 12px",bg:"GBK10A",color:"GBK07A",maxWidth:388,minHeight:40,fontSize:12,sx:{lineHeight:"20px",borderRadius:"8px",a:{color:"primary"}},dangerouslySetInnerHTML:{__html:Object(l.useMemo)((function(){return t.text.replace("https://www.zhihu.com/report?report_location=1","#report").replace("http://www.zhihu.com/defriend","#block")}),[t.text])},onClick:function(e){var t=e.target.href;t&&(e.preventDefault(),n&&t.endsWith("#report")?(n(),F.a.trackEvent(r.current,{action:"Click",id:6882})):a&&t.endsWith("#block")?(a(),F.a.trackEvent(r.current,{action:"Click",id:6883})):!function(e){return R.includes(e)}(t)?window.open(t,"_blank"):i||o(!0))}})},He=n(1161);function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var Fe=function(e){Object(c.a)(n,e);var t=Ve(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).ref=Object(l.createRef)(),e.state={isMoreActionMenuShow:!1,isReportModalShow:!1,isShieldUserModalShown:!1},e.handleDocClick=function(t){e.state.isMoreActionMenuShow&&e.ref.current&&!e.ref.current.contains(t.target)&&(t.stopPropagation(),t.preventDefault(),e.setState({isMoreActionMenuShow:!1}))},e.toggleMoreActionMenu=function(){e.setState({isMoreActionMenuShow:!e.state.isMoreActionMenuShow})},e.handleMessageDelete=function(){var t=e.props,n=t.deleteMessage,a=t.message.id,r=t.sender.id;_.a.confirm(Object(s.b)("div",{style:{textAlign:"center"},children:"是否删除该条消息"}),{title:"删除消息"}).then((function(){return n(a,r)}),(function(){}))},e.handleReSendMessage=function(){var t=e.props,n=t.deleteLocalMessage,a=t.sender.id,r=t.sendMessage,c=t.message,i=c.id,o=c.contentType;if(o!==C.a.ecomcard)if(o!==C.a.image)n(i,a),r({contentType:o,receiverId:a,data:Object(z.a)({},o,c[o]),tempMessageId:i});else{var s=c.image.url;if(s.startsWith("blob")){var l=c.file,u=e.props,d=u.uploadImage,p=u.setImageSendFailure,h=i;d(l).then((function(e){return r({contentType:C.a.image,receiverId:a,data:{image:{height:e.payload.dataRawheight,width:e.payload.dataRawwidth,url:e.payload.src}},tempMessageId:h})})).then((function(){URL.revokeObjectURL(s)})).catch((function(){p({tempMessageId:h,receiverId:a,file:l})}))}else r({contentType:o,receiverId:a,data:Object(z.a)({},o,c[o]),tempMessageId:i})}},e.handleReSendIconClick=function(){_.a.confirm(null,{title:"是否重新发送消息"}).then((function(){e.handleReSendMessage()}),(function(){}))},e.renderMessage=function(t){var n=e.props,a=n.sender.id,r=n.isEcomMerchant,c=n.sendMessage,i=t.isEcomWelcomeCard;return t.contentType===C.a.text?i?Object(s.b)(_e,{senderId:a,message:t,isEcomMerchant:r}):Object(s.b)(G,{message:t,senderId:a,sendMessage:c}):t.contentType===C.a.image?Object(s.b)(Y,{image:t.image}):t.contentType===C.a.sticker?Object(s.b)(Q,{sticker:t.sticker}):t.contentType===C.a.ecomcard?Object(s.b)(Ie,{senderId:a,message:t,isEcomMerchant:r}):"web 上暂不支持此类消息，请至 app 查看"},e.toggleReportModal=function(){e.setState({isReportModalShow:!e.state.isReportModalShow})},e.renderMessageStatus=function(t){if(t===C.e.success){var n=e.state.isMoreActionMenuShow,a="receiver"===e.props.message.userType;return Object(s.b)("div",{className:"Message-status--wrapper",children:Object(s.b)(He.a,{ref:e.ref,isOpen:n,onToggleMenu:e.toggleMoreActionMenu,onDeleteClick:e.handleMessageDelete,onReportClick:e.toggleReportModal,showReport:!a})})}return t===C.e.loading?Object(s.b)(B.a,{className:"Message-status--loading"}):t===C.e.failure?Object(s.b)(A.a,{className:"Message-status--failure",onClick:e.handleReSendIconClick}):null},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleDocClick)}},{key:"render",value:function(){var e=this,t=this.props,n=t.message,a=t.sender,r=t.receiver,c=n.type,i=n.userType,o=n.status,l=n.showTime,u=n.createdTime,d=n.id,p=this.state,h=p.isReportModalShow,f=p.isShieldUserModalShown,b=Object(s.b)(s.a,{children:l&&Object(s.b)("p",{className:"Message-time",children:Object(s.b)(Le,{time:u})})});if("risk_tip"===c||"tip"===c)return Object(s.c)(s.a,{children:[b,h&&Object(s.b)(L.a,{type:"message",urlToken:n.associateId,shown:!0,onClose:this.toggleReportModal}),f&&Object(s.b)(D.a,{shown:f,onClose:function(){return e.setState({isShieldUserModalShown:!1})},user:a}),Object(s.b)(De,{message:n,onRequestReport:this.toggleReportModal,onRequestBlock:function(){e.setState({isShieldUserModalShown:!0})}})]});var v="receiver"===i?r:a;return Object(s.c)("div",{className:"Message-wrapper",children:[b,h&&Object(s.b)(L.a,{type:"message",urlToken:d,shown:!0,onClose:this.toggleReportModal}),Object(s.c)("div",{className:m()("Message",{"Message--reverse":"receiver"===i}),children:[Object(s.b)(P.a,{user:v,size:40}),Object(s.c)("div",{className:m()("Message-content",{"Message-content--reverse":"receiver"===i}),children:[this.renderMessage(n),Object(s.b)("div",{className:"Message-status",children:this.renderMessageStatus(o)})]})]})]})}}]),n}(l.Component);Fe.propsTypes={message:h.a.object,sender:h.a.object,receiver:h.a.object};var Ue=Object(d.connect)(null,{deleteMessage:O.f,deleteLocalMessage:O.e,sendMessage:O.p,setImageSendFailure:O.q,uploadImage:N.b})(Fe);function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var qe=function(e){Object(c.a)(n,e);var t=Ge(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={showQuestionTagModal:!1},e.scrollToBottom=function(){e.messageBoxEle.scrollTop=e.messageBoxEle.scrollHeight},e.handleGetHistoryMessage=function(t){var n=e.props,a=n.isLoading,r=n.nextApiUrl,c=n.getHistoryMessages,i=n.senderId,o=n.isEnd;!t||a||o||c({senderId:i,nextApiUrl:r})},e.setShowQuestionTagModal=function(t){return e.setState({showQuestionTagModal:t})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getHistoryMessages,n=e.senderId,a=e.messages,r=e.setMessageRead,c=e.sender,i=void 0===c?{}:c;0!==a.length&&i.id?this.scrollToBottom():t({senderId:n}).catch((function(){location.href="//www.zhihu.com/messages"})),r(n)}},{key:"componentDidUpdate",value:function(e){var t=e.messages,n=void 0===t?[]:t,a=this.props,r=a.messages,c=a.setMessageRead,i=a.senderId,o=n[n.length-1]||{},s=r[r.length-1]||{};o.id!==s.id&&(this.scrollToBottom(),"sender"===s.userType&&c(i));var l=e.sender,u=(l=void 0===l?{}:l).id,d=this.props.sender;(d=void 0===d?{}:d).id!==u&&this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,n=t.messages,a=t.receiver,r=t.sender,c=void 0===r?{}:r,i=t.senderId,o=t.isLoading,l=t.isEcomMerchant,u=this.state.showQuestionTagModal;return c.id?Object(s.c)(T.Provider,{value:{showModal:u,setShowModal:this.setShowQuestionTagModal},children:[Object(s.b)(g.b,{isLoading:o,onLoad:this.handleGetHistoryMessage,placeholder:Object(s.b)(v.a,{className:"MessagesBox-loading"}),isPrevDrained:!1,isDrained:!0,getContainer:function(e){return e},className:"MessagesBox",onRef:function(t){e.messageBoxEle=t},children:n.map((function(e){return Object(s.b)("div",{children:Object(s.b)(Ue,{message:e,receiver:a,sender:c,isEcomMerchant:l})},e.tempMessageId||e.id)}))}),Object(s.b)(I,{showModal:u,onClose:function(){return e.setShowQuestionTagModal(!1)},senderId:i})]}):Object(s.b)(v.a,{className:"MessagesBox-loading"})}}]),n}(l.Component);qe.PropsTypes={senderId:h.a.string};var Ke=Object(b.compose)(Object(d.connect)((function(e,t){var n=t.senderId,a=e.chat.chats[n]||{},r=a.receiver,c=void 0===r?{}:r,i=a.sender,o=void 0===i?{}:i,s=a.messages,l=void 0===s?[]:s,u=a.isLoading,d=void 0!==u&&u,p=a.isEnd;return{receiver:c,sender:o,messages:l,isLoading:d,isEnd:void 0===p||p,nextApiUrl:a.nextApiUrl,isEcomMerchant:(e.chat.chats||{}).isEcomMerchant}}),{getHistoryMessages:O.k,setMessageRead:O.r}),Object(j.a)())(qe),We=n(34),Ye=n(110),Je=n.n(Ye),Qe=n(134),Ze=n(243),Xe=n(24),$e=n(920),et=n(1295);function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var nt=function(e){Object(c.a)(n,e);var t=tt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).checkSize=function(t){var n=e.props.showNotification;if(t.size>1024*Xe.R*1024)return n("请上传小于 ".concat(Xe.R,"M 的图片。"),"red"),!1},e.sendImage=function(t){var n=t.file;(0,e.props.handleSendImage)(n)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props.className;return Object(s.b)($e.a,{accept:"image/png,image/jpeg",onRef:function(t){e.uploadInput=t},customUpload:this.sendImage,beforeUpload:this.checkSize,multiple:!0,children:Object(s.b)(et.a,{className:t})})}}]),n}(l.Component);nt.propTypes={senderId:h.a.string,className:h.a.string,handleSendImage:h.a.func};var at=Object(d.connect)(null,{showNotification:Se.h})(nt),rt=n(1276),ct=n(988),it=n(993);function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var st=function(e){Object(c.a)(n,e);var t=ot(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={isEmoticonsHidden:!0},e.toggleEmoticonPanel=function(){e.setState({isEmoticonsHidden:!e.state.isEmoticonsHidden})},e.handleSelectEmoticon=function(t,n){var a=e.props,r=a.insertEmoji,c=a.handleSendEmoticon;"emoji"===n?r(t.placeholder):c(t),e.toggleEmoticonPanel()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.className,t=this.state.isEmoticonsHidden;return Object(s.c)("div",{className:"EmoticonTool",children:[!t&&Object(s.b)("div",{className:"EmoticonTool--mask",onClick:this.toggleEmoticonPanel}),!t&&Object(s.b)(it.a,{className:"EmoticonTool-panel",onSelectEmoticon:this.handleSelectEmoticon}),Object(s.b)(rt.a,{className:m()("EmoticonTool-icon",e),onClick:this.toggleEmoticonPanel})]})}}]),n}(l.Component);st.propTypes={senderId:h.a.string,className:h.a.string};var lt=Object(ct.a)()(st),ut=n(4),dt={0:{prefix:null,text:"免费",key:""},1:{prefix:"¥",key:"discountPrice"},2:{prefix:"¥",key:"discountPrice"},3:{suffix:"折",key:"discountRate"}},pt=function(e){var t=e.couponInfo,n=void 0===t?{}:t,a=n.couponType,r=dt[void 0===a?1:a],c=r.text||"discountPrice"===r.key?n[r.key]/100:n[r.key];return u.a.createElement("div",{className:m()("KfeCollection-MessageCouponCard-coupon")},r.prefix&&u.a.createElement("span",{className:m()("KfeCollection-MessageCouponCard-tag","tag-prefix")},r.prefix),c,r.suffix&&u.a.createElement("span",{className:m()("KfeCollection-MessageCouponCard-tag","tag-suffix")},r.suffix))},ht=function(e){var t=e.result,n=e.isInMessage,a=t.title,r=t.description,c=t.className,i=void 0===c?"KfeCollection-MessageCouponCard-orangeCoupon--light":c;return u.a.createElement("div",{className:m()("KfeCollection-MessageCouponCard",i,{"KfeCollection-MessageCouponCard--InMessage":n})},u.a.createElement("div",{className:"KfeCollection-MessageCouponCard-content"},u.a.createElement("div",{className:"KfeCollection-MessageCouponCard-title"},a),u.a.createElement("div",{className:"KfeCollection-MessageCouponCard-text"},r)),u.a.createElement(pt,{couponInfo:t}))},ft=function(e){var t=e.result,n=e.onClick,a=e.isInMessage,r=void 0!==a&&a,c=e.extra.theme,i=void 0===c?"light":c,o=t.id;return u.a.createElement($.b,{block:"EcomMessageCouponCard",content:{type:ee.e.coupon,id:o}},u.a.createElement($.a,{shouldTrackShow:!0,zaType:"Card",zaAction:"Unknown",zaText:"留资卡片",zaEventType:"Unknown",onClick:function(e){F.a.trackEvent(e.target,{id:10049,action:"Click",name:String(o)}),n()}},u.a.createElement(X.a,{options:[{},{},{id:10047,name:String(o)}]},u.a.createElement(ht,{result:t,isInMessage:r,theme:i}))))};ft.propTypes={className:h.a.string,result:h.a.object.isRequired,extra:h.a.shape({ua:h.a.object,theme:h.a.string,styles:h.a.object}).isRequired};var mt=ft,bt=n(254),vt=n(131),gt=Object.assign;var Ot=function(e){return u.a.createElement(vt.a,gt({width:"24",height:"24",fill:"none",viewBox:"0 0 26 26"},e),u.a.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z",opacity:".01"}),u.a.createElement("path",{fill:"#646464",d:"M16.875 7.149c.182 1.255-.302 3.01-1.436 5.369-.328.6-.62 1.479-.597 1.768.013.169.08.316.215.448l3.042-3.042a1.626 1.626 0 012.228-.068l.747.742c.611.612.634 1.59.068 2.228l-1.483 1.487c.455.17 1 .51 1.314.982.315.471.532 1.493.532 3.177 0 .663-.532 1.273-1.236 1.273l-6.062-.015c-.25.193-.528.346-.826.453l-2.161.652a.85.85 0 01-.844-.212c-.203-.203-.318-.5-.2-.896-.003.003-6.924.018-6.924.018A1.247 1.247 0 012 20.259l.013-1.49c-.013-.77.13-1.155.314-1.435.181-.274.443-.54.63-.73l.014-.013c.445-.452 1.444-.737 2.777-.98 2.487-.454 2.875-.819 2.915-1.325.01-.131-.162-.851-.548-1.606-1.255-2.444-1.705-3.934-1.49-5.502C6.944 4.827 8.662 3 11.752 3c3.09 0 4.776 1.77 5.122 4.149zm.65 6.886l-5.272 5.282c-.271.332-.678 1.873-.678 1.873s1.582-.41 1.92-.721l5.235-5.229-1.205-1.205zM8.11 7.382C8.391 5.7 9.513 4.506 11.754 4.5c2.241-.005 3.397 1.221 3.635 2.863.129.883-.288 2.394-1.285 4.469-.439.8-.81 1.918-.758 2.57a2.12 2.12 0 00.649 1.393l-2.577 2.582c-.557.62-.79 1.614-.79 1.614l-7.125.02.012-1.334c0-.408.08-.634.36-.873.233-.2.552-.34.877-.439.451-.11.918-.208 1.372-.303 1.016-.214 1.972-.415 2.563-.706.866-.426 1.378-1.061 1.472-1.954.075-.707-.72-2.44-.72-2.44S7.85 8.956 8.111 7.382zm10.34 9.91l-2.713 2.71 4.26.008s-.056-1.624-.213-2.012c-.082-.155-.275-.458-1.335-.707zm.575-4.752a.375.375 0 01.489.036l.71.717a.376.376 0 01-.036.489l-.574.574-1.206-1.206.617-.61z",fillRule:"evenodd",clipRule:"evenodd"}))},jt=Object.assign;var yt=function(e){return u.a.createElement(vt.a,jt({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),u.a.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z",opacity:".01"}),u.a.createElement("path",{fill:"#646464",d:"M3.004 18.5a2.285 2.285 0 002.285 2.284h13.736a2.285 2.285 0 002.285-2.285v-3.732a.763.763 0 00-.759-.846h-.01a1.526 1.526 0 01.01-3.053.763.763 0 00.759-.847V6.29a2.285 2.285 0 00-2.285-2.285H5.289A2.285 2.285 0 003.004 6.29v3.732a.763.763 0 00.759.846h.015a1.526 1.526 0 01-.015 3.053.763.763 0 00-.759.846v3.732zM17.5 12.394c0 1.423.975 2.62 2.293 2.957v3.147a.768.768 0 01-.767.768H5.289a.768.768 0 01-.767-.768v-3.147a3.054 3.054 0 000-5.915V6.29c0-.424.343-.768.767-.768h13.736c.424 0 .767.344.767.768v3.147a3.054 3.054 0 00-2.293 2.958zm-3.807 0a1.535 1.535 0 11-3.07 0 1.535 1.535 0 013.07 0zm1.517 0a3.052 3.052 0 11-6.104 0 3.052 3.052 0 016.104 0z",fillRule:"evenodd",clipRule:"evenodd"}))},wt=n(235),Et=n.n(wt),Mt=n(1062),kt=n.n(Mt),Ct=function(e){var t=e.cardList,n=e.onSend,a=e.onClose,r=e.isEvent,c=r?ae:mt;return Object(s.b)(E.b,{title:r?"活动":"优惠券",onClose:a,className:"EcomCardTool-Modal",children:Object(s.b)("ul",{className:"EcomCardTool-Modal--list",children:t.map((function(e,t){return Object(s.b)("li",{className:"EcomCardTool-Modal--cardItem",children:Object(s.b)(c,{result:e,extra:{},onClick:function(){return n(Object.assign({},e,{cardType:r?1:2}))}})},e.token||t)}))})})};Ct.propTypes={onClose:h.a.func.isRequired,cardList:h.a.array,onSend:h.a.func};var xt=function(e){var t=e.senderId,n=e.className,a=e.isEvent,r=e.onHandleFirstInterActive,c=Object(d.useSelector)((function(e){return e.env.theme})),i=Object(d.useDispatch)(),o=Object(l.useState)(!1),u=Object(y.a)(o,2),p=u[0],h=u[1],f=Object(l.useState)([]),b=Object(y.a)(f,2),v=b[0],g=b[1],j=Object(M.c)((function(){i(Object(O.i)({senderId:t})).then((function(e){var t;return g(null===(t=e.payload)||void 0===t?void 0:t.data)}))})),w=Object(M.c)((function(){i(Object(O.h)()).then((function(e){var t,n,a;return n=null===(t=e.payload)||void 0===t?void 0:t.data,a=!kt()(n)&&n.map((function(e){return Object.assign({},e,{className:1===(null==e?void 0:e.template.id)?"KfeCollection-MessageCouponCard-orangeCoupon--".concat(c):"KfeCollection-MessageCouponCard-blueCoupon--".concat(c),description:e.intro})}))||[],void g(Object(ut.a)(a))}))}));Object(l.useEffect)((function(){a&&j()}),[a,j]),Object(l.useEffect)((function(){a||w()}),[a,w]);var E=a?Ot:yt,k=function(e){var n=e.token,a=e.cardType,c=e.id;(function(e){var n=e.token,a=e.cardType;if(r(),1===a){var c=Je()("TempEventCard_");return i(Object(O.a)(t,c,a)),i(Object(O.n)({contentType:C.a.ecomcard,token:n,data:{receiverId:t,cardType:a},tempMessageId:c}))}return i(Object(O.n)({contentType:C.a.ecomcard,id:n,data:{receiverId:t,cardType:a}}))})({token:n||c,cardType:a}).then((function(){h(!1)})).catch(Et.a)};return Object(s.b)($.b,{block:"EcomMessageEcomCardTool",content:{type:"Message"},children:Object(s.b)(ze.a,{trackCardShow:!0,view:{id:a?9975:9976,url:"fakeurl://dialogue/user.*"},children:Object(s.c)("div",{className:"EcomCardTool",children:[Object(s.b)($.e,{shouldTrackClick:!0,zaText:a?"留资卡片":"优惠券卡片",zaType:"Button",zaEventType:"Click",children:Object(s.b)(E,{className:m()("EcomCardTool-icon",n),width:22,height:22,onClick:function(e){p||!kt()(v)?(h(!p),Object(bt.a)(e,{id:a?9978:9979,action:"Click"})):i(Object(Se.h)("请先去 ecom.zhihu.com 配置","red"))}})}),p&&Object(s.b)(Ct,{isEvent:a,cardList:v,onSend:function(e){return k(e)},onClose:function(){return h(!1)}})]})})})};xt.propTypes={senderId:h.a.string,className:h.a.string,isEvent:h.a.bool,onHandleFirstInterActive:h.a.func};var Rt=xt;function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var St=function(e){Object(c.a)(n,e);var t=Tt(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.senderId,n=e.insertEmoji,a=e.handleSendImage,r=e.handleSendEmoticon,c=e.onHandleFirstInterActive,i=e.isEcomMerchant;return Object(s.c)("ul",{className:"ToolBar",children:[Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(lt,{className:"ToolBar-Icon",senderId:t,insertEmoji:n,handleSendEmoticon:r})}),Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(at,{className:"ToolBar-Icon",senderId:t,handleSendImage:a})}),i&&Object(s.c)(s.a,{children:[Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(Rt,{isEvent:!0,className:"ToolBar-Icon",senderId:t,onHandleFirstInterActive:c},"event")},"event"),Object(s.b)("li",{className:"ToolBar-item",children:Object(s.b)(Rt,{isEvent:!1,className:"ToolBar-Icon",senderId:t,onHandleFirstInterActive:c},"coupon")},"coupon")]})]})}}]),n}(l.Component);St.propTypes={senderId:h.a.string,insertEmoji:h.a.func,handleSendImage:h.a.func,handleSendEmoticon:h.a.func,onHandleFirstInterActive:h.a.func};var It=Object(d.connect)((function(e){return{isEcomMerchant:(e.chat.chats||{}).isEcomMerchant}}))(St),zt=function(e){var t=Object(l.useState)(!1),n=Object(y.a)(t,2),a=n[0],r=n[1];return a?null:Object(s.b)(At,Object.assign({},e,{dispose:function(){return r(!0)}}))},At=function(e){var t=e.endSignal,n=void 0!==t&&t,a=e.dispose,r=Object(l.useState)(0),c=Object(y.a)(r,2),i=c[0],o=c[1];Object(l.useEffect)((function(){o(Date.now())}),[]);var s=Object(M.c)((function(e){var t=e-i;t>0&&t<=6e4&&(Object(bt.a)(null,{id:9980,action:"StatusReport"}),null==a||a())}));return Object(l.useEffect)((function(){if(n){var e=Date.now();s(e)}}),[s,n]),Object(M.i)(a,6e4),null};zt.propTypes={endSignal:h.a.bool};var _t=zt;function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var Pt=function(e){Object(c.a)(n,e);var t=Nt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={cursorPosition:0,firstInteractive:!1},e.inputRef=Object(l.createRef)(),e.countDownTimer=null,e.handleSetFirsetInteractive=function(){e.setState({firstInteractive:!0})},e.checkSize=function(t){var n=e.props.showNotification;return!(t.size>1024*Xe.R*1024)||(n("请上传小于 ".concat(Xe.R,"M 的图片。"),"red"),!1)},e.handleKeyDown=function(t){var n=e.props,a=n.inputMessage,r=n.senderId,c=n.inputValue;13===t.keyCode&&(t.ctrlKey||t.metaKey)?a({senderId:r,inputValue:"".concat(c,"\n")}):13!==t.keyCode||t.shiftKey||e.handleSendTextMessage(t)},e.handleSendImage=function(t){var n;if(t&&e.checkSize(t)){var a=e.props,r=a.uploadImage,c=a.sendMessage,i=a.senderId,o=a.addTempImageMessage,s=a.setImageSendFailure,l=Je()("TempImage_");e.handleSetFirsetInteractive(),Object(Ze.a)(t).then((function(e){var n=URL.createObjectURL(e);Object(K.loadImage)(n).then((function(a){var u=a.height,d=a.width;o(i,n,l,u,d),r(e).then((function(e){return c({contentType:C.a.image,receiverId:i,data:{image:{height:e.payload.dataRawheight,width:e.payload.dataRawwidth,url:e.payload.src}},tempMessageId:l})})).catch((function(){s({tempMessageId:l,receiverId:i,file:t})}))}))})),null===(n=e.inputRef.current)||void 0===n||n.focus()}},e.handleSendEmoticon=function(t){var n,a=t.id,r=t.dynamicImageUrl,c=t.staticImageUrl,i=t.title,o=e.props,s=o.senderId,l=o.sendMessage;e.handleSetFirsetInteractive(),l({contentType:"sticker",receiverId:s,data:{sticker:{sticker_id:a,url:r||c,title:i}}}),F.a.trackEvent(null,{id:3640,action:"Click",name:i}),null===(n=e.inputRef.current)||void 0===n||n.focus()},e.handleSendTextMessage=function(t){var n=e.props,a=n.senderId,r=n.sendMessage,c=n.inputValue,i=n.location.query,o=i.source_type,s=i.source_id;c.length>1e4?_.a.alert("发送文字不得超过 1 万字，请重新编辑后再次发送",{title:"发送失败"}):c.trim()&&(e.handleSetFirsetInteractive(),t.preventDefault(),r({contentType:C.a.text,receiverId:a,data:{text:c},sourceType:o,sourceId:s}),F.a.trackEvent(null,{id:5309,action:"Click"}))},e.insertEmoji=function(t){var n,a=e.props,r=a.inputMessage,c=a.senderId,i=a.inputValue,o=e.state.cursorPosition,s=[i.slice(0,o),t,i.slice(o)].join("");e.setState({cursorPosition:o+t.length}),r({senderId:c,inputValue:s}),F.a.trackEvent(null,{id:3641,action:"Click",name:t.slice(1,t.length-1)}),null===(n=e.inputRef.current)||void 0===n||n.focus()},e.handleBlur=function(t){e.setState({cursorPosition:t.target.selectionStart})},e.handleInputMessage=function(t){var n=e.props;(0,n.inputMessage)({senderId:n.senderId,inputValue:t.target.value})},e.handleInputRef=function(t){e.inputRef.current=t},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.inputRef.current&&(this.inputRef.current.focus(),this.inputRef.current.addEventListener("keydown",this.handleKeyDown))}},{key:"componentWillUnmount",value:function(){this.inputRef.current&&this.inputRef.current.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.inputValue,n=e.senderId,a=e.sender;return(null==a?void 0:a.isForbidden)?Object(s.b)("div",{className:"InputBox",css:{justifyContent:"flex-end"},children:Object(s.b)("div",{className:"InputBox-footer",children:Object(s.c)("div",{className:"InputBox-footerDesc",css:{textAlign:"center",paddingRight:0},children:["要反馈",Object(s.b)(We.Link,{to:"/messages/3d198a56310c02c4a83efb9f4a4c027e",css:function(e){return{color:e.colors.GBK06A,fontWeight:"bold",paddingLeft:"4px"}},children:"@知乎小管家"})]})})}):Object(s.c)("div",{className:"InputBox",children:[Object(s.b)(_t,{endSignal:this.state.firstInteractive}),Object(s.b)(It,{senderId:n,insertEmoji:this.insertEmoji,handleSendImage:this.handleSendImage,handleSendEmoticon:this.handleSendEmoticon,onHandleFirstInterActive:this.handleSetFirsetInteractive}),Object(s.b)(Qe.a,{multiline:!0,spread:!0,value:t,className:"InputBox-input",onRef:this.handleInputRef,onChange:this.handleInputMessage,onBlur:this.handleBlur}),Object(s.c)("div",{className:"InputBox-footer",children:[Object(s.b)("div",{className:"InputBox-footerDesc",children:"按 Enter 键发送"}),Object(s.b)(w.c,{preset:"primary",color:"blue",className:"InputBox-sendBtn",onClick:this.handleSendTextMessage,disabled:!t.trim(),children:"发送"})]})]})}}]),n}(l.Component);var Bt=Object(b.compose)(We.withRouter,Object(d.connect)((function(e,t){var n=t.senderId,a=(e.chat.chats[n]||{}).inputValue;return{inputValue:void 0===a?"":a}}),{sendMessage:O.p,inputMessage:O.m,uploadImage:N.b,addTempImageMessage:O.b,setImageSendFailure:O.q,showNotification:Se.h}))(Pt),Lt=n(783);function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var Ht=function(e){Object(c.a)(n,e);var t=Dt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={isAlertShow:!0},e.handleCloseAlert=function(){e.setState({isAlertShow:!1})},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.className;return this.state.isAlertShow?Object(s.c)("div",{className:m()("AbnormalAlert",n),children:[Object(s.b)("span",{className:"AbnormalAlert-message",dangerouslySetInnerHTML:{__html:t}}),Object(s.b)(Lt.a,{className:"AbnormalAlert-icon",onClick:this.handleCloseAlert})]}):null}}]),n}(l.Component);Ht.propsTypes={message:h.a.object,className:h.a.string};var Vt=n(124),Ft=Object.assign;var Ut=function(e){return u.a.createElement(vt.a,Ft({width:"200",height:"88",fill:"none",viewBox:"0 0 200 88"},e),u.a.createElement("path",{fill:"#E3EAF1",d:"M90.78 11.188H52.292v66.743h9.43l1.259 8.04 12.754-8.04H90.78V11.189zM74.51 69.597l-7.488 4.713-.734-4.713h-5.389V19.47h21.186v50.126H74.51zM45.189 41.222H31.193c0-1.473.105-2.98.123-4.557V19.477H47.27v-4.054a4.224 4.224 0 00-1.262-2.99 4.307 4.307 0 00-3.024-1.238H18.072c.088-.277.175-.555.262-.797C19.192 7.834 21.938.002 21.938.002a13.32 13.32 0 00-7.54 2.183c-1.784 1.248-2.851 2.131-4.286 6.082-1.662 4.54-3.114 8.923-4.094 11.54C4.514 23.981.875 31.328.875 31.328a18.295 18.295 0 007.872-1.906c3.5-1.854 5.249-4.696 6.421-9.01l.28-.936h7.295v17.188c0 1.56-.14 3.067-.227 4.557H9.64a8.404 8.404 0 00-5.914 2.426 8.242 8.242 0 00-2.449 5.856h20.399a55.358 55.358 0 01-2.432 11.401 52.49 52.49 0 01-9.412 16.478A103.517 103.517 0 010 86.687s9.78 3.674 16.952-2.98c4.34-4.037 8.223-11.92 10.095-17.898a87.786 87.786 0 003.499-16.34h18.65v-4.28a3.918 3.918 0 00-1.169-2.81 4.022 4.022 0 00-2.838-1.157z"}),u.a.createElement("path",{fill:"#E3EAF1",d:"M35.222 58.361l-7.226 4.661 15.746 23.305a21.572 21.572 0 002.099-6.931 9.843 9.843 0 00-.875-6.775l-9.744-14.26zm125.555-14.01v-29.23a7322.86 7322.86 0 0029.496-1.507l2.659-.156c1.207-1.248 2.764-7.485 2.152-9.443-.228-.78-.665-2.08-1.995-1.733a103.979 103.979 0 01-13.366 2.27c-8.642 1.005-12.403 1.265-24.387 2.131-20.994 1.525-39.713 2.253-39.713 2.253a7.857 7.857 0 00.64 3.114 7.923 7.923 0 001.823 2.617 8.012 8.012 0 002.713 1.697 8.085 8.085 0 003.169.507c7.12-.294 17.494-.78 28.114-1.282v28.762h-39.941c0 2.197.881 4.303 2.449 5.857a8.406 8.406 0 005.914 2.425h31.578v22.11c0 2.772-1.452 3.725-3.849 3.794h-12.247a12.979 12.979 0 002.613 4.826 13.117 13.117 0 004.385 3.335 19.423 19.423 0 008.468.866c4.251-.208 9.272-2.581 9.272-11.158V52.633h35.252c1.067 0 2.091-.42 2.845-1.167A3.965 3.965 0 00200 48.648v-4.297h-39.223z"}),u.a.createElement("path",{fill:"#E3EAF1",d:"M133.169 24.611a7.192 7.192 0 00-2.065-1.914 7.273 7.273 0 00-5.476-.882 7.26 7.26 0 00-2.571 1.167l-1.172.85 13.296 18.279 6.998-5.06-9.01-12.44zm46.048-.617L169.455 36.8l6.997 5.198 14.119-18.522-1.172-.867a7.294 7.294 0 00-8.066-.49 7.196 7.196 0 00-2.116 1.876z"}))};function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var qt=function(e){Object(c.a)(n,e);var t=Gt(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.senderId,n=e.getEcomProfile;(0,e.getAccountInfo)(),t&&n(t)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.senderId,a=e.sender,r=e.warning,c=r.status,i=r.message,o=a||{},l=o.name,u=void 0===l?"":l,d=o.vipInfo,p=((void 0===d?{}:d)||{}).vipIcon;return n?Object(s.c)("div",{className:m()("ChatBox",t),children:[c&&Object(s.b)(Ht,{message:i,className:"ChatBox-alert"}),Object(s.c)("header",{className:"ChatBox-title",children:[Object(s.b)("span",{children:u}),p&&Object(s.b)("img",{src:p.url,className:"ChatBox-titleVipIcon"})]}),Object(s.b)("div",{className:"MessagesBox-wrapper",children:Object(s.b)(Ke,{senderId:n})}),Object(s.b)(Bt,{senderId:n,sender:a})]}):Object(s.b)("div",{className:"ChatBox-empty",children:Object(s.b)(Ut,{className:"ChatBox-emptyImage"})})}}]),n}(l.Component);qt.propTypes={senderId:h.a.string,className:h.a.string};t.a=Object(d.connect)((function(e,t){var n=t.senderId,a=e.chat.chats[n]||{},r=a.receiver,c=void 0===r?{}:r,i=a.sender,o=void 0===i?{}:i,s=a.warning;return{receiver:c,sender:o,warning:void 0===s?{}:s}}),{getAccountInfo:Vt.d,getEcomProfile:O.j})(qt)},1275:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(18),i=function(e){return r.a.createElement(c.a,e,r.a.createElement("path",{d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-.034 2.966c1.949 0 1.485 1.807 1.485 2.211 0 .115-.785 7.79-.785 7.79h-1.4s-.785-7.623-.785-7.738c0-.416-.463-2.263 1.485-2.263zm1.057 13.522c-.294.287-.647.43-1.056.43-.41 0-.762-.142-1.058-.43a1.429 1.429 0 0 1-.443-1.07c0-.41.148-.762.443-1.057a1.443 1.443 0 0 1 1.058-.442c.409 0 .762.143 1.056.43.296.287.443.644.443 1.07 0 .427-.147.783-.443 1.07z",fillRule:"evenodd"}))};i.defaultProps={name:"Alert"},t.a=i},1276:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(18),i=function(e){return r.a.createElement(c.a,e,r.a.createElement("path",{d:"M7.523 13.5h8.954c-.228 2.47-2.145 4-4.477 4-2.332 0-4.25-1.53-4.477-4zM12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1.5a7.5 7.5 0 1 0 0-15 7.5 7.5 0 0 0 0 15zm-3-8a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm6 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}))};i.defaultProps={name:"Emotion"},t.a=i},1294:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(18),i=function(e){return r.a.createElement(c.a,e,r.a.createElement("path",{d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z",fillRule:"evenodd"}))};i.defaultProps={name:"Dots"},t.a=i},1295:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(18),i=function(e){return r.a.createElement(c.a,e,r.a.createElement("path",{d:"M13.25 5.5H6.868c-.755 0-1.368.613-1.368 1.368v10.264c0 .755.613 1.368 1.368 1.368h10.264c.755 0 1.368-.613 1.368-1.368V10.75H20v6.467A2.783 2.783 0 0 1 17.217 20H6.783A2.783 2.783 0 0 1 4 17.217V6.783A2.783 2.783 0 0 1 6.783 4h6.467v1.5zM8.158 13.4a1.033 1.033 0 0 1 1.744-.078l.258.37a.782.782 0 0 0 1.303-.031l1.332-2.113a1.173 1.173 0 0 1 2.01.043l2.03 3.537A1.25 1.25 0 0 1 15.748 17H8.25a1.252 1.252 0 0 1-1.085-1.873l.992-1.728zM9.5 11a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3.75-5.5a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5zM18.5 4V2.25a.75.75 0 1 1 1.5 0V4h1.75a.75.75 0 1 1 0 1.5H20v1.75a.75.75 0 1 1-1.5 0V5.5h-1.75a.75.75 0 1 1 0-1.5h1.75zm.75 7.5a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5z"}))};i.defaultProps={name:"AddImage"},t.a=i},1314:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(13),r=n(14),c=n(15),i=n(16),o=n(9),s=n(2),l=n(1),u=n(3),d=n.n(u),p=n(74),h=n(29),f=n(783),m=n(1164),b=n(1269);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(c.a)(n,e);var t=v(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.memberHashId,n=e.isModalShow,a=e.handleCloseModal;return Object(s.b)(p.b,{className:"ChatBoxModal",spread:!0,onClose:a,contentClassName:"ChatBoxModal-content",closeButton:Object(s.b)(h.c,{preset:"plain",className:"ChatBoxModal-closeButton",onClick:a,"aria-label":"关闭",children:Object(s.b)(f.a,{className:"ChatBoxModal-closeIcon"})}),children:n&&Object(s.b)(m.a,{handleReceiveMessage:this.handleReceiveMessage,children:Object(s.b)(b.a,{type:"default",senderId:t,className:"Chat-ChatBox"},t)})})}}]),n}(l.Component);g.propTypes={memberHashId:d.a.string,handleCloseModal:d.a.func,isModalShow:d.a.bool}},2620:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(13),c=n(14),i=n(67),o=n(15),s=n(16),l=n(9),u=n(32),d=n(2),p=n(1),h=n(19),f=n(25),m=n(30),b=n(11),v=n.n(b),g=n(34),O=n(28),j=n(29),y=n(1165),w=n(370),E=n(83),M=n(180),k=n(1314),C=n(37),x=n(913),R=n(1063),T=n(236),S=n(899),I=n(887);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var A=function(e){Object(o.a)(n,e);var t=z(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).handleMessageClick=function(t){var n=e.props.onMessageClick;t.preventDefault(),n()},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.item,t=e.id,n=e.snippet,a=e.participant,r=e.unreadCount;return Object(d.c)("a",{href:"//www.zhihu.com/inbox/".concat(t),className:v()("Messages-item Messages-followItem",{"Messages-newItem":r>0}),onClick:this.handleMessageClick,children:[Object(d.b)(S.a,{user:a,avatarProps:{size:40},noLink:!0,noHoverCard:!0}),Object(d.c)("div",{className:"Messages-user",children:[Object(d.b)("div",{className:"Messages-userName",children:Object(d.b)(I.a,{user:a,noLink:!0,noHoverCard:!0})}),Object(d.b)("div",{className:"Messages-itemContent",children:Object(R.stripHTML)(n)})]})]})}}]),n}(p.Component),_=Object(T.a)()(A),N=n(291);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var B={ids:[],isFetching:!1,isDrained:!1},L=Object(m.createSelector)((function(e){return e.messages.data[e.messages.currentTab]||B}),(function(e){return e.entities.messages}),(function(e,t){var n=e.ids,a=Object(u.a)(e,["ids"]);return Object.assign({},a,{items:n.map((function(e){return t[e]}))})}));var D=function(e){Object(o.a)(n,e);var t=P(n);function n(){var e;Object(r.a)(this,n);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={isChatModalShow:!1},e.handleSwitchTab=function(t){var n=e.props,r=n.currentTab,c=n.setCurrentTab;if(e.loader){var i="".concat(r,"-scrollTop");e.setState(Object(a.a)({},i,e.loader.el.scrollTop))}c(t)},e.loadMessageList=function(t){var n=e.props,a=n.messageCount,r=n.loadMessages,c=n.markMessageRead,i=!t&&Boolean(a);r(i).then((function(){i&&c()}))},e.checkIsInMessagesPage=function(){return e.props.location.pathname.startsWith("/messages")},e.handleMessageClick=function(t){var n=e.props.router,a=t.participant.id;e.checkIsInMessagesPage()?n.replace("/messages/".concat(a)):e.setState({isChatModalShow:!0,curMessageSenderId:a}),e.menu.popover.close()},e.handleCloseChatModal=function(){e.setState({isChatModalShow:!1})},e.handleAddMessageClick=function(t){var n=e.props.router;O.a.trackEvent(t.target,{id:5310,action:"Click"}),e.checkIsInMessagesPage()?n.replace("".concat(location.pathname,"?tab=search")):location.href="//www.zhihu.com/messages?tab=search",e.menu.popover.close()},e.handleCheckAllMessageClick=function(){var t=e.props.router;e.checkIsInMessagesPage()?t.replace("/messages"):location.href="//www.zhihu.com/messages",e.menu.popover.close()},e.handleOpen=function(){var t=e.props,n=t.currentTab,a=t.messageCount;O.a.trackEvent(Object(i.a)(e),{id:2763,action:"Click"}),!e.props.items.length||a?e.loadMessageList():e.loader.el.scrollTop=e.state["".concat(n,"-scrollTop")]},e.handleClose=function(){if(e.loader){var t=e.props.currentTab,n="".concat(t,"-scrollTop");e.setState(Object(a.a)({},n,e.loader.el.scrollTop))}},e}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.currentTab,r=n.messageCount,c=n.items,i=e.currentTab;a===i||c.length&&!r?a!==i&&c.length&&setTimeout((function(){t.loader.el.scrollTop=t.state["".concat(a,"-scrollTop")]}),17):this.loadMessageList()}},{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.isFetching,r=t.isDrained,c=t.items,i=t.currentTab,o=t.className,s=t.IconButton,l=t.hasOpenStrangerMessage,u=t.messageCount,p=this.state,h=p.isChatModalShow,f=p.curMessageSenderId,m=r&&!c.length?Object(d.b)("div",{className:"Messages-list",children:Object(d.c)(x.k,{children:[Object(d.b)(x.h,{}),Object(d.b)("div",{children:"还没有私信"})]})}):Object(d.b)(w.b,{id:"Messages-".concat(i),className:"Messages-list",ref:function(t){e.loader=t},isLocal:!0,isLoading:a,isDrained:r,onLoad:function(){return e.loadMessageList(!0)},stopPropagation:!0,getContainer:function(e){return e},threshold:200,placeholder:Object(d.b)(w.a,{className:"Messages-item",small:!0}),children:c.map((function(t,n){return Object(d.b)(_,{item:t,onMessageClick:function(){e.handleMessageClick(t)}},n)}))}),b={};return"new"===n&&(b={boundary:{padding:16},arrowed:!1}),Object(d.c)("div",{children:[Object(d.b)(E.c,Object.assign({menuClassName:"Messages-menu",menuContainerClassName:v()("Messages-menuContainer","Messages-menuContainer--".concat(n)),preventCloseOnTarget:!0,positionStatus:"fixed",onOpen:this.handleOpen,onClose:this.handleClose,ref:function(t){e.menu=t},toggler:Object(d.b)(s,{className:o,count:u,"aria-label":u?"".concat(u,"条私信"):"私信"})},b,{children:Object(d.c)("div",{className:"Messages-content",children:[l?Object(d.c)("div",{className:"Messages-header",role:"tablist",children:[Object(d.b)(j.c,{preset:"plain",role:"tab","aria-controls":"Messages-common",className:v()("Messages-tab",{"Messages-currentTab":"common"===i}),onClick:function(){return e.handleSwitchTab("common")},children:"最近联系"}),Object(d.b)(j.c,{preset:"plain",role:"tab","aria-controls":"Messages-stranger",className:v()("Messages-tab",{"Messages-currentTab":"stranger"===i}),onClick:function(t){e.handleSwitchTab("stranger"),O.a.trackEvent(t.target,{id:5311,action:"Click"})},children:"陌生人私信"})]}):Object(d.b)("div",{className:"Messages-header",role:"tablist",children:Object(d.b)(j.c,{preset:"plain",className:"Messages-tab Messages-myMessageTab",children:"我的私信"})}),m,Object(d.c)("div",{className:"Messages-footer",children:[Object(d.c)(j.c,{preset:"plain",onClick:this.handleAddMessageClick,children:[Object(d.b)(y.a,{className:"Button-icon",style:{marginRight:4},size:16,center:!0}),"写新私信"]}),Object(d.b)(j.c,{preset:"plain",onClick:this.handleCheckAllMessageClick,children:"查看全部私信"})]})]})})),Object(d.b)(k.a,{memberHashId:f,handleCloseModal:this.handleCloseChatModal,isModalShow:h})]})}}]),n}(p.PureComponent);t.default=Object(h.compose)(g.withRouter,Object(f.connect)((function(e){var t=e.currentUser,n=e.messages,a=n.currentTab,r=n.messageCount,c=L(e),i=c.items,o=c.isDrained,s=c.isFetching,l=Object(C.b)(e).availableMessageTypes;return{currentUser:t,items:i,currentTab:a,messageCount:r,hasOpenStrangerMessage:(l&&l.length)>1,isFetching:s,isDrained:o,preset:"2"===Object(M.a)(e,"web_pcleft")?"new":"old"}}),{loadMessages:N.c,setCurrentTab:N.e,markMessageRead:N.d}))(D)},844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=t.onViewedOnce=t.isViewed=void 0;var a=n(914);Object.defineProperty(t,"isViewed",{enumerable:!0,get:function(){return a.isViewed}}),Object.defineProperty(t,"onViewedOnce",{enumerable:!0,get:function(){return a.onViewedOnce}});var r=n(915);Object.defineProperty(t,"isFullyViewed",{enumerable:!0,get:function(){return r.isFullyViewed}}),Object.defineProperty(t,"onFullyViewedOnce",{enumerable:!0,get:function(){return r.onFullyViewedOnce}})},850:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(32),r=n(40),c=n(2),i=n(1),o=n(63),s=n(90),l=n(234),u=n(71),d=n.n(u),p=n(369),h=function(e){return/^\w+:\/\//.test(e)?e:location.origin+e},f=function(e,t){var n=t.params,a=t.onRequestOpen,c=Object(p.b)();return function(t){var i=e.href,s=e.onClick;if(s&&s(t),!t.defaultPrevented){var l=function(e,t){if(!t)return e;var n=e.split("#"),a=Object(r.a)(n,2),c=a[0],i=a[1],o=c+(c.includes("?")?"&":"?")+t;return i?o+"#"+i:o}(h(i),n);return c.ZhihuHybrid?(t.preventDefault(),void o.a.dispatch("base/openURL",{url:l})):c.isMiniProgram?(t.preventDefault(),void function(e,t){var n,a=function(){var n,a,r,c=null,i=null;if(t.WxMiniProgram)c=null===(a=window.wx)||void 0===a||null===(r=a.miniProgram)||void 0===r?void 0:r.navigateTo;else if(t.JDMiniProgram){var o,s;c=null===(o=window.jd)||void 0===o||null===(s=o.miniProgram)||void 0===s?void 0:s.navigateTo}var l,u=null===(n=/\/topic\/(\d+)/.exec(e))||void 0===n?void 0:n[1];(u&&(t.WxMiniProgram?i="/pages/topic?id=".concat(u):t.JDMiniProgram&&(i="/pages/topic/index?id=".concat(u))),i)?null===(l=c)||void 0===l||l({url:i}):/^http(s)?:/.test(e)&&(location.href=e)};!t.WxMiniProgram||(null===(n=window.WeixinJSBridge)||void 0===n?void 0:n.invoke)?a():document.addEventListener("WeixinJSBridgeReady",a,!1)}(l,c)):void((null==a?void 0:a({ua:c,url:l}))&&t.preventDefault())}}},m=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:d()({link:{get url(){return h(e)}}},n)}},b=Object(i.forwardRef)((function(e,t){var n=e.params,r=e.onRequestOpen,i=e.extra,o=Object(a.a)(e,["params","onRequestOpen","extra"]);return Object(c.b)(l.c,Object.assign({as:s.Link},m(o.href,{extra:i}),o,{ref:t,onClick:f(o,{params:n,onRequestOpen:r})}))}));t.b=function(e){var t=e.params,n=e.onRequestOpen,r=e.children,c=e.extra,o=Object(a.a)(e,["params","onRequestOpen","children","extra"]);return Object(i.cloneElement)(r,Object(l.j)(Object.assign({},m(r.props.href,{extra:c}),o,{ref:r.ref,onClick:f(r.props,{params:t,onRequestOpen:n})})))}},863:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return l}));var a={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga"},r=(Object.assign({},a,{album_chapter:a.album,album_video_chapter:a.album,album_paid_column:a.album,paid_column_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,web_literature:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_chapter:a.publication,publication_paid_magazine:a.publication,magazine_section:a.publication,paid_answer:a.album,assessment:a.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画"}),c={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",assessment:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书"},i={live:a.live,album:a.album,album_chapter:a.album,album_paid_column:a.album,album_video_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,paid_column_chapter:a.album,assessment:a.album,publication:a.publication,publication_chapter:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_paid_magazine:a.publication,special:a.publication,web_literature:a.publication,magazine_section:a.publication,manga:a.publication},o=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","assessment","special"],s={paidAnswer:"PaidAnswer",paidPost:"PaidPost"},l={paid_magazine:"PaidMagazine",paid_column:"PaidColumn",album:"RemixAlbum",ebook:"EBook",instabook:"InstaBook",literature:"Literature",training:"Training",training_bundle:"TrainingBundle",special:"Special",ebook_audio:"AudioBook",live:"Live",publication:"EBook",web_literature:"EBook",album_chapter:"RemixAlbum",album_paid_column:"RemixAlbum",album_video_chapter:"RemixAlbum",manga:"Manga",free_conversation:"FreeConversation",event:"Event",Onebox:"OneBox"}},877:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),r=n.n(a),c=n(131),i=Object.assign;var o=function(e){return r.a.createElement(c.a,i({width:"150",height:"120",viewBox:"0 0 150 120"},e),r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#EBEEF5",d:"M44 31.005v55.99A3.003 3.003 0 0047.003 90h53.994A3.005 3.005 0 00104 86.995v-55.99A3.003 3.003 0 00100.997 28H47.003A3.005 3.005 0 0044 31.005zm-3 0A6.005 6.005 0 0147.003 25h53.994A6.003 6.003 0 01107 31.005v55.99A6.005 6.005 0 01100.997 93H47.003A6.003 6.003 0 0141 86.995v-55.99z",fillRule:"nonzero"}),r.a.createElement("path",{fill:"#F7F8FA",d:"M59 50a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 40.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5zM59 73a6 6 0 110-12 6 6 0 010 12zm12-9.5c0-.828.68-1.5 1.496-1.5h9.008c.826 0 1.496.666 1.496 1.5 0 .828-.68 1.5-1.496 1.5h-9.008A1.495 1.495 0 0171 63.5zm0 7c0-.828.667-1.5 1.5-1.5h21c.828 0 1.5.666 1.5 1.5 0 .828-.667 1.5-1.5 1.5h-21c-.828 0-1.5-.666-1.5-1.5z"})))}},879:function(e,t,n){"use strict";var a=n(20),r=n.n(a),c=n(21),i=n.n(c),o=n(22),s=n.n(o),l=n(23),u=n.n(l),d=n(17),p=n.n(d),h=n(3),f=n.n(h),m=n(1),b=n.n(m),v=n(11),g=n.n(v),O=n(944),j=n(150),y=n(69),w=n.n(y),E=n(140),M=n(5);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var C={top:10,left:20},x={top:0,left:0};var R=function(e){s()(n,e);var t=k(n);function n(){var e;r()(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).scrollerRef=b.a.createRef(),e.state={transEnded:!1,rect:null,translate:null,scale:null},e.getBoundingClientRect=function(){var t=e.props,n=t.img,a=t.data,r=n.getBoundingClientRect(),c=r.left,i=r.top,o=r.width,s=r.height,l=a.width,u=a.height,d={left:c,top:i,width:o,height:s},p=1;return l>u?(d.height=s,p=s/u,d.width=l*p,d.left=c+(o-d.width)/2,d.top=i+(s-d.height)/2):l<u&&(d.width=o,p=o/l,d.height=u*p,d.left=c+(o-d.width)/2,d.top=i+(s-d.height)/2),d},e.handleClick=function(t){t.stopPropagation(),e.setState({translate:null,scale:null})},e.handleTransitionEnd=function(){var t=e.state,n=t.translate,a=t.scale,r=e.props.onClose;n&&a?(e.setState({transEnded:!0}),e.scrollerRef.current.style.overflow="auto"):r()},e}return i()(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.img,n=e.isOriginalUrl;this.originalSrc!==this.currentSrc&&((new Image).src=this.originalSrc);this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this;Object(O.disableBodyScroll)(this.scrollerRef.current);var t=this.props.img;setTimeout((function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:t.dataset.rawwidth||t.naturalWidth})))}))}},{key:"componentWillUnmount",value:function(){Object(O.enableBodyScroll)(this.scrollerRef.current)}},{key:"computeTransition",value:function(e,t){var n,a=this.props,r=a.transitionType,c=a.data,i=w()(navigator.userAgent).Mobile?x:C,o=i.top,s=i.left,l=window,u={left:0,top:0,width:l.innerWidth,height:l.innerHeight},d=function(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}(u),p={width:u.width-2*s,height:u.height-2*o},h={},f={};return 1===r?(h.width=p.width>c.width?c.width:p.width,n=h.width/c.width,h.height=c.height*n,f={x:(p.width-h.width)/2+s,y:h.height<p.height?(p.height-h.height)/2+o:C.top}):(h.width=p.width>t.width?t.width:p.width,n=h.width/e.width,h.height=e.height*n,f={x:d.x-e.width/2,y:(h.height<p.height?d.y:C.top+h.height/2)-e.height/2}),{translate:f,scale:n}}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.img,r=n.isOriginalUrl,c=n.data,i=n.transitionType,o=n.className,s=this.state,l=s.translate,u=s.scale,d=s.rect,p=s.transEnded,h=l&&u,f=1,m="";if(1===i){var b=(w()(navigator.userAgent).Mobile?x:C).left;e=Math.min(window.innerWidth-2*b,c.width);var v=d.width/e;m=h?"translate(".concat(l.x,"px, ").concat(l.y,"px) scale(1) "):"translate(".concat(d.left,"px, ").concat(d.top,"px) scale(").concat(v,") "),f=h?1:0}else m=h?"translate(".concat(l.x,"px ,").concat(l.y,"px) scale(").concat(u,") "):"translate(".concat(d.left,"px,").concat(d.top,"px)");return Object(M.g)(E.a,null,Object(M.g)("div",{className:g()("ImageView",o,{"is-active":h}),style:{paddingBottom:C.top},onClick:this.handleClick},Object(M.g)("div",{className:"ImageView-inner",ref:this.scrollerRef},Object(M.g)("img",{ref:function(e){t.imgEl=e},src:!1===r?Object(j.imgUrl)(a.dataset.original,"r"):p&&this.originalSrc||this.currentSrc,className:g()("ImageView-img",{"ImageView-transformOrigin":1===i}),style:{width:e||d.width,transform:m,opacity:f},onTransitionEnd:this.handleTransitionEnd,alt:"preview"}))))}},{key:"originalSrc",get:function(){return this.props.img.dataset.original}},{key:"currentSrc",get:function(){var e=this.props.img;return e.currentSrc||e.src}}]),n}(m.Component);R.propTypes={img:f.a.object.isRequired,onClose:f.a.func.isRequired};t.a=R},885:function(e,t,n){"use strict";var a=n(13),r=n(14),c=n(15),i=n(16),o=n(9),s=n(2),l=n(3),u=n.n(l),d=n(1),p=n(25),h=n(844),f=n(28);n(886);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var b=function(e){Object(c.a)(n,e);var t=m(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.zaViewName;Object(h.onViewedOnce)(this.node,(function(){f.a.trackCardShow(null,{id:3613,name:e})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaViewName,r=t.vipIcon,c=r.nightModeUrl,i=r.url,o="light"===n?i:c;return Object(s.b)("a",{className:"UserLink-vipIcon",href:"https://www.zhihu.com/vip",target:"_blank",rel:"noopener noreferrer",ref:function(t){return e.node=t},"data-za-detail-view-id":3612,"data-za-detail-view-name":a,children:Object(s.b)("img",{src:o,alt:"zhihu vip"})})}}]),n}(d.Component);b.propTypes={vipIcon:u.a.shape({nightModeUrl:u.a.string,url:u.a.string}).isRequired,zaViewName:u.a.string},t.a=Object(p.connect)((function(e){return{theme:e.env.theme}}))(b)},886:function(e,t,n){},887:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(32),r=n(2),c=n(11),i=n.n(c),o=n(372),s=n(889),l=n(952),u=n(885),d=n(898);function p(e){var t,n,c=e.className,p=e.showVipIcon,h=e.vipIconZaViewName,f=e.user,m=void 0===f?{}:f,b=e.noBadge,v=e.children,g=Object(a.a)(e,["className","showVipIcon","vipIconZaViewName","user","noBadge","children"]),O=Object(s.a)(m),j=O&&!b,y=null===(t=m.vipInfo)||void 0===t?void 0:t.isVip,w=O&&p&&(null===(n=m.vipInfo)||void 0===n?void 0:n.vipIcon);return Object(r.c)("span",{className:i()("UserLink",c),children:[Object(r.b)(d.a,Object.assign({},g,{user:m,children:v||m.name})),j&&Object(r.b)(o.c,Object.assign({css:{marginLeft:".3em"},isOrg:m.isOrg,badge:m.badgeV2||m.badge,linkify:!0,enableTooltip:!0},g)),y&&Object(r.b)(l.a,{css:{marginLeft:".3em"}}),w&&Object(r.b)(u.a,{vipIcon:m.vipInfo.vipIcon,zaViewName:h})]})}},888:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var a,r=n(40),c=n(0),i=n(2),o=n(66),s=n(1),l=n(74),u=n(890),d=n(373),p="https://www.zhihu.com/xen/market/vip-privileges",h={comment_img:"comment_img",dynamic_top:"dynamic_top",comment_sticker:"comment_sticker",block_keyword:"block_keyword"},f=(a={},Object(c.a)(a,h.comment_img,"https://pic1.zhimg.com/v2-1b6677f81c2df41f55332474e15bc5a8.png"),Object(c.a)(a,h.dynamic_top,"https://pic1.zhimg.com/v2-e16a265a43592abd5b98fceef02a1614.png"),Object(c.a)(a,h.comment_sticker,"https://pic1.zhimg.com/v2-183a98cd480d24cd3e3246ba7a26303b.png"),Object(c.a)(a,h.block_keyword,"https://pic3.zhimg.com/v2-0ad4e8aa43c3279cc7536f2fb7ac8348.png"),a);t.c=Object(u.a)((function(e){var t=e.show,n=e.setShow,a=e.type,c=e.isLogin,u=Object(s.useState)(""),h=Object(r.a)(u,2),m=h[0],b=h[1],v=Object(s.useState)(!1),g=Object(r.a)(v,2),O=g[0],j=g[1],y=Object(d.b)(),w=Object(o.c)((function(){t&&n(!1)})),E=Object(o.c)((function(){window.open(p,"_blank")}));return Object(s.useEffect)((function(){!m&&c&&(j(!0),y("/api/v4/unlimited/vip_rights/popup?token="+a).then((function(e){b(e.payload.button.text)})).catch((function(){})).then((function(){j(!1)})))}),[t]),Object(i.b)(l.b,{css:{".Modal-content":{padding:0,marginTop:0}},onClose:w,children:t&&!O&&Object(i.c)(i.a,{children:[Object(i.b)("img",{src:f[a],css:{height:"230px",width:"400px",display:"block"}}),Object(i.b)("div",{css:{padding:20},children:Object(i.b)("div",{css:function(e){return{padding:8,background:"linear-gradient(135deg, ".concat(e.colors.GYL06A," 0.2%, ").concat(e.colors.GYL08A," 100%)"),borderRadius:3,textAlign:"center",fontsize:14,color:e.colors.GYL12A,userSelect:"none","&:hover":{cursor:"pointer"}}},onClick:E,children:m||"开通会员立即解锁"})})]})})}))},889:function(e,t,n){"use strict";function a(e){var t=e.id,n=e.name,a=e.urlToken;return"0"===t||"知乎用户"===n?null:Boolean(a||t)}n.d(t,"a",(function(){return a}))},890:function(e,t,n){"use strict";var a=n(13),r=n(14),c=n(15),i=n(16),o=n(9),s=n(2),l=n(1),u=n(3),d=n.n(u),p=n(73),h=n.n(p),f=n(399);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}t.a=function(e){var t=function(t){Object(c.a)(i,t);var n=m(i);function i(){return Object(a.a)(this,i),n.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){var t=this.props.currentUser,n=this.context.authRequired,a=void 0===n?function(){}:n;return Object(s.b)(e,Object.assign({isLogin:t&&"guest"!==t.userType,authRequired:a},this.props))}}]),i}(l.Component);return t.contextTypes={authRequired:d.a.func},h()(Object(f.b)(t),e)}},898:function(e,t,n){"use strict";var a=n(32),r=n(2),c=n(25),i=n(66),o=n(55),s=n(1),l=n(235),u=n.n(l),d=n(34),p=n(63),h=n(28);function f(e,t){var n=e.isPinProfile,c=e.user,o=e.isPinDaily,s=e.onClick,l=void 0===s?u.a:s,f=e.children,m=Object(a.a)(e,["isPinProfile","user","isPinDaily","onClick","children"]),b=c.id,v=c.urlToken,g=c.isOrg,O=c.url,j=c.maskLevel,y="//www.zhihu.com/".concat(g?"org":"people","/").concat(v||b),w="zhihu://pin".concat(O,"/moments"),E=Object(i.c)((function(e){o&&"A"===e.target.nodeName&&h.a.trackEvent(e.target,{id:2065}),n&&(e.preventDefault(),p.a.dispatch("base/openURL",{url:w})),j&&e.preventDefault(),l(e)}));return Object(r.b)(d.Link,Object.assign({ref:t,to:y,target:"_blank",onClick:E,className:"UserLink-link","data-za-detail-view-element_name":"User"},m,{children:f}))}var m=Object(s.forwardRef)(f),b=n(889);t.a=function(e){var t=e.user,s=e.noHoverCard,l=e.noLink,u=e.children,d=Object(a.a)(e,["user","noHoverCard","noLink","children"]),p=t.id,h=t.urlToken,f=!Object(b.a)(t)||l,v=Object(c.useSelector)((function(e){return Object(o.d)(e,{includeTablet:!0})})),g=null!=s?s:v,O=Object(i.d)((function(){return n.e(56).then(n.bind(null,1139))}),!g);if(f)return u;var j=Object(r.b)(m,Object.assign({},d,{user:t,children:u}));return g||!O?j:Object(r.b)(O,{toggler:j,id:p,urlToken:h,user:t})}},899:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(32),r=n(2),c=n(11),i=n.n(c),o=n(177),s=n(898);function l(e){var t=e.className,n=e.user,c=void 0===n?{}:n,l=e.avatarProps,u=void 0===l?{}:l,d=Object(a.a)(e,["className","user","avatarProps"]),p=c.name,h=c.avatarUrl;return Object(r.b)("span",{className:i()("UserLink",t),children:Object(r.b)(s.a,Object.assign({},d,{user:c,children:Object(r.b)(o.a,Object.assign({className:"UserLink-avatar",url:h,alt:p},u))}))})}},913:function(e,t,n){"use strict";n.d(t,"k",(function(){return i})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return O})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return E})),n.d(t,"g",(function(){return k})),n.d(t,"j",(function(){return R})),n.d(t,"f",(function(){return C.a}));var a=n(32),r=n(2),c=n(90),i=function(e){var t=e.children,n=Object(a.a)(e,["children"]);return Object(r.b)(c.Flex,Object.assign({alignItems:"center",justifyContent:"center",flex:1,height:"100%"},n,{children:Object(r.b)(c.Text,{textAlign:"center",color:"GBL05A",children:t})}))},o=n(1),s=n.n(o),l=n(131),u=Object.assign;var d=function(e){return s.a.createElement(l.a,u({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M94 29v-2.002c0-.55.443-.998 1-.998h1c.553 0 1 .446 1 .998V29h2.002c.55 0 .998.443.998 1v1c0 .553-.446 1-.998 1H97v2.002c0 .55-.443.998-1 .998h-1c-.553 0-1-.446-1-.998V32h-2.002A.997.997 0 0191 31v-1c0-.553.446-1 .998-1H94zm30.613 17.724l-21.82-4.638.207-3.023 22.237 4.727a6.004 6.004 0 014.62 7.122l-7.9 37.158a6.001 6.001 0 01-7.116 4.627l-15.31-3.254.63-2.934 15.31 3.25c1.62.34 3.218-.69 3.56-2.32l7.9-37.16a3.005 3.005 0 00-2.31-3.567zM48.596 85.727l.624 2.935-12.717 2.703a6.004 6.004 0 01-7.117-4.628L21.488 49.58a6.004 6.004 0 014.62-7.123L47 38.017l.133 3.038-20.402 4.337a3 3 0 00-2.3 3.564l7.9 37.157a3.005 3.005 0 003.56 2.317l12.71-2.703zM100 82c0 3.314-2.688 6-6.006 6H56.006A6.01 6.01 0 0150 82V34c0-3.314 2.688-6 6.006-6h27.147v3H56.006A3.003 3.003 0 0053 34v48c0 1.65 1.35 3 3.006 3h37.988A3.003 3.003 0 0097 82V42.373h3V82zm-4.5-41C89.7 41 85 36.3 85 30.5S89.7 20 95.5 20 106 24.7 106 30.5 101.3 41 95.5 41zm0-3a7.5 7.5 0 100-15 7.5 7.5 0 000 15z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M47 73.22l-6.484 1.378c-.82.174-1.333.97-1.16 1.78.173.816.97 1.327 1.784 1.154L47 76.287V73.22zm0-8.594l-4.58.974c-.8.17-1.324.968-1.152 1.778a1.494 1.494 0 001.775 1.156l3.957-.84v-3.068zm0-17.285a6.002 6.002 0 00-8 5.66 6.002 6.002 0 008 5.66V47.34zm56 29.88l6.178 1.318a1.5 1.5 0 10.624-2.934L103 74.148v3.067zm0-8.58l4.275.91c.808.17 1.6-.34 1.775-1.157a1.507 1.507 0 00-1.15-1.78l-4.9-1.04v3.067zm0-8.97c.626.22 1.3.34 2 .34 3.314 0 6-2.685 6-6s-2.686-6-6-6c-.7 0-1.374.12-2 .34v11.32zM76 56a8 8 0 110-16 8 8 0 010 16zm-8 7.5c0-.828.667-1.5 1.505-1.5h12.99a1.5 1.5 0 110 3h-12.99A1.5 1.5 0 0168 63.5zm-5 8c0-.828.67-1.5 1.49-1.5h23.02c.822 0 1.49.666 1.49 1.5 0 .828-.67 1.5-1.49 1.5H64.49c-.822 0-1.49-.666-1.49-1.5z"})))},p=Object.assign;var h=function(e){return s.a.createElement(l.a,p({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M67.757 83H45c-1.66 0-3-1.338-3-2.998V37.998A3.003 3.003 0 0145 35h53.42v-3H45c-3.31 0-6 2.686-6 5.998v42.004A5.994 5.994 0 0045 86h21.515l6.853 6.854a2.99 2.99 0 004.234 0L84.456 86H105c3.31 0 6-2.686 6-5.998v-36.54h-3v36.54A3.003 3.003 0 01105 83H83.214l-7.728 7.728L67.756 83z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M55 48.5c0-.828.67-1.5 1.508-1.5h26.984a1.5 1.5 0 110 3H56.508A1.5 1.5 0 0155 48.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 59.5zm0 11c0-.828.677-1.5 1.495-1.5h37.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-37.01A1.494 1.494 0 0155 70.5z"}),s.a.createElement("path",{fill:"#EBEEF5",d:"M94.868 50.46l18.92-18.92-2.83-2.827-18.918 18.92-2.12-2.123 18.917-18.918a3.005 3.005 0 014.245-.002l2.828 2.828a3.004 3.004 0 01-.002 4.245L96.99 52.58l-2.122-2.12zm-7.193 2.377l2.244-7.327 7.07 7.07-7.328 2.245c-1.575.482-2.473-.405-1.988-1.988z",fillRule:"nonzero"})))},f=Object.assign;var m=function(e){return s.a.createElement(l.a,f({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.94 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.21-.298-1.67 0l-4.316 2.79A1.99 1.99 0 0144 93V30.997C44 27.687 46.68 25 50.002 25h48.996A5.996 5.996 0 01105 30.998v62c0 .45-.147.866-.396 1.2l-4.112-2.658z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M55 39c0-.553.44-1 1-1h19c.553 0 1 .44 1 1v19c0 .553-.44 1-1 1H56c-.553 0-1-.44-1-1V39zm25 .5c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.5 1.5 0 110 3h-35.99A1.5 1.5 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0155 75.5z"})))},b=Object.assign;var v=function(e){return s.a.createElement(l.a,b({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M37.273 69.98c.212-3.3 3.063-5.98 6.387-5.98h63.91c3.315 0 6.175 2.673 6.387 5.98l1.285 20.04c.212 3.302-2.302 5.98-5.615 5.98H41.603c-3.313 0-5.827-2.673-5.615-5.98l1.285-20.04zm1.71 20.23C38.88 91.788 40.02 93 41.603 93h68.023c1.58 0 2.722-1.215 2.62-2.79l-1.284-20.037c-.11-1.726-1.657-3.173-3.394-3.173H43.66c-1.74 0-3.282 1.447-3.393 3.173L38.982 90.21zM47 58h58v-3.5a1.5 1.5 0 013 0v5c0 .414-.168.79-.44 1.06a1.49 1.49 0 01-1.06.44h-61a1.49 1.49 0 01-1.06-.44A1.49 1.49 0 0144 59.5v-5a1.5 1.5 0 013 0V58zm50-31H55v28.008h-3V25.992c0-1.1 1.025-1.992 2.283-1.992h43.434c1.26 0 2.283.898 2.283 1.992v29.016h-3V27zM60 87.5c0-.828.668-1.5 1.5-1.5h29c.828 0 1.5.666 1.5 1.5 0 .828-.668 1.5-1.5 1.5h-29c-.828 0-1.5-.666-1.5-1.5zM46 72.01c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm-52 7c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98zm8 0c0-.558.443-1.01 1.01-1.01h1.98c.558 0 1.01.443 1.01 1.01v1.98c0 .558-.443 1.01-1.01 1.01h-1.98c-.558 0-1.01-.443-1.01-1.01v-1.98z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M71 34.5a1.5 1.5 0 011.497-1.5h7.006a1.5 1.5 0 110 3h-7.006A1.495 1.495 0 0171 34.5zm-9 8c0-.828.665-1.5 1.505-1.5h24.99a1.5 1.5 0 110 3h-24.99A1.5 1.5 0 0162 42.5zm0 7c0-.828.67-1.5 1.495-1.5h19.01c.826 0 1.495.666 1.495 1.5 0 .828-.67 1.5-1.495 1.5h-19.01A1.494 1.494 0 0162 49.5z"})))},g=Object.assign;var O=function(e){return s.a.createElement(l.a,g({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M106.807 78h8.19A3.004 3.004 0 00118 74.998V34.002A3 3 0 00114.997 31H61.003A3.004 3.004 0 0058 34.002V36h-3v-1.998A6.004 6.004 0 0161.003 28h53.994A6 6 0 01121 34.002v40.996A6.004 6.004 0 01114.997 81h-5.372l-.375 6.004c-.138 2.207-1.514 2.732-3.074 1.172L99 81h-5v-3h6.243l6.178 6.178.388-6.178zM44.824 95.176c-1.56 1.56-2.936 1.035-3.074-1.172L41.312 87H37a6 6 0 01-6-6.006V45.006A6.01 6.01 0 0137 39h48a6 6 0 016 6.006v35.988A6.01 6.01 0 0185 87H53l-8.176 8.176zm-.245-3.998L51.755 84H85c1.65 0 3-1.35 3-3.006V45.006A3 3 0 0085 42H37c-1.65 0-3 1.35-3 3.006v35.988A3 3 0 0037 84h7.13l.45 7.178z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M94 49h9.494a1.5 1.5 0 110 3H94v-3zm0 9h9.494a1.5 1.5 0 110 3H94v-3zm-50 6.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 64.5zm0-14.503c0-.55.453-.997.997-.997h6.006c.55 0 .997.453.997.997v6.006c0 .55-.453.997-.997.997h-6.006c-.55 0-.997-.453-.997-.997v-6.006zM44 73.5c0-.828.68-1.5 1.505-1.5h30.99a1.5 1.5 0 110 3h-30.99A1.5 1.5 0 0144 73.5z"})))},j=Object.assign;var y=function(e){return s.a.createElement(l.a,j({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("path",{fill:"#EBEEF5",d:"M62.85 82.335c-.13-.03-.202-.04-.25-.044-.117 0-.31.05-.87.34-7.092 2.65-7.508 2.79-9.903 3.43-.955.26-1.885.46-2.826.63-1.24.23-2.52-.08-3.35-.83-1.12-1.01-1.16-2.58-.02-3.73l.28-.22s.074-.053.204-.19c.265-.26.54-.63.81-1.102.588-1.05 1.025-2.445 1.224-4.246.145-.8-.374-2.14-1.117-2.833-.23-.216-.696-.727-1.487-1.683-3.62-4.37-6.03-12.332-6.03-18.87C39.5 37.19 53.48 23.5 72.446 23.5c19.842 0 32.947 13.235 32.947 29.466 0 21.157-22.76 36.133-42.028 29.488-.182-.04-.473-.11-.515-.12zm-.068-3.038c.233.014.448.05.717.108l.6.14c17.56 6.102 38.29-7.514 38.29-26.58 0-14.58-11.77-26.465-29.95-26.465-17.32 0-29.95 12.36-29.95 26.466 0 5.885 2.203 13.176 5.333 16.96.716.865 1.102 1.287 1.222 1.4 1.432 1.34 2.34 3.65 2.044 5.404-.246 2.172-.8 3.94-1.585 5.338a8.3 8.3 0 01-1.213 1.68c1.02-.175 1.87-.366 2.75-.598 2.25-.596 2.667-.743 9.4-3.245.95-.47 1.596-.653 2.326-.608zm11.554 9.593a1.5 1.5 0 111.919-2.306c5.242 4.364 12.82 5.41 19.8 2.98l.173-.05c.084-.017.372-.085.433-.1.22-.046.39-.074.59-.086.61-.037 1.14.11 1.87.472 4.83 1.793 5.13 1.9 6.73 2.324.57.15 1.12.276 1.68.38-.22-.318-.46-.7-.68-1.153-.58-1.14-.99-2.51-1.173-4.12-.232-1.39.38-2.75 1.537-3.83.12-.11.43-.44.947-1.05 2.1-2.47 3.356-7.15 3.356-11.61 0-4.7-.62-7.39-2.7-10.094a1.5 1.5 0 012.381-1.828c2.56 3.33 3.318 6.62 3.318 11.925 0 5.11-1.433 10.45-4.066 13.555-.59.693-.98 1.107-1.19 1.304-.49.46-.675.873-.623 1.16.16 1.37.47 2.41.894 3.25.324.647.62 1.013.756 1.13 1.162 1.17.883 2.636-.177 3.54-.78.67-1.91 1-2.948.817-.69-.124-1.373-.28-2.073-.46-1.75-.466-2.05-.57-7.08-2.44l-.156-.068c-.344-.173-.42-.195-.414-.195-.142.03-.33.075-.464.105-7.91 2.728-16.56 1.52-22.627-3.533z"}))},w=Object.assign;var E=function(e){return s.a.createElement(l.a,w({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("path",{fill:"#EBEEF5",d:"M46.76 78.71a1.895 1.895 0 00-1.378 2.092c.13.948.94 1.648 1.904 1.635h55.468a1.882 1.882 0 001.884-1.635c.13-.95-.46-1.846-1.367-2.09a8.61 8.61 0 01-6.4-7.872l-2.473-20.928c-.96-7.872-6.567-14.37-14.178-16.435l-.986-.267-.113-1.014c-.24-2.106-2.01-3.696-4.11-3.696s-3.87 1.59-4.104 3.696l-.114 1.014-.98.267c-7.61 2.063-13.22 8.563-14.18 16.43L53.15 70.84c-.2 3.74-2.79 6.926-6.393 7.87zm50.61-29.155l2.482 20.982c.127 2.562 1.817 4.654 4.19 5.276a4.895 4.895 0 013.568 5.397c-.336 2.446-2.434 4.26-4.876 4.227H47.306a4.883 4.883 0 01-4.896-4.227 4.897 4.897 0 013.58-5.4 5.614 5.614 0 004.17-5.168l2.49-21.093c1.068-8.77 7.135-16.06 15.46-18.7.807-3.11 3.615-5.35 6.9-5.35s6.094 2.24 6.9 5.35c8.325 2.64 14.393 9.93 15.46 18.7zm-16.417 38.91c-.288 3.184-3.007 5.36-5.943 5.36-2.936 0-5.655-2.176-5.943-5.36l-2.988.27c.43 4.82 4.52 8.09 8.93 8.09s8.49-3.27 8.93-8.09l-2.99-.27z"}))},M=Object.assign;var k=function(e){return s.a.createElement(l.a,M({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("path",{fill:"#E7EAF1",d:"M39.09 35.994c.05-3.31 2.777-5.994 6.096-5.994h18.562c2.21 0 4.667 1.66 5.487 3.708L70.152 36h34.85A5.997 5.997 0 01111 41.99v40.02c0 3.308-2.69 5.99-6 5.99H45c-3.314 0-6-2.686-6-5.99V41.99c0-.077 0-.153.004-.23l.086-5.766zm2.914 5.81L42 41.99v40.02A2.998 2.998 0 0045 85h60c1.655 0 3-1.342 3-2.99V41.99a2.998 2.998 0 00-3-2.99H68.12l-1.67-4.177C66.085 33.915 64.73 33 63.747 33h-18.56c-1.68 0-3.07 1.368-3.097 3.038l-.086 5.767zM69.89 72.658c-1.56.715-3.105-.395-2.906-2.113l.697-6.032-4.11-4.47c-1.16-1.265-.58-3.076 1.115-3.418l5.952-1.2 2.982-5.29c.843-1.498 2.744-1.507 3.593 0l2.98 5.29 5.955 1.2c1.684.34 2.28 2.145 1.11 3.418l-4.11 4.47.698 6.032c.197 1.708-1.336 2.832-2.908 2.113l-5.52-2.527-5.523 2.53z"}))},C=n(877),x=Object.assign;var R=function(e){return s.a.createElement(l.a,x({width:"150",height:"120",viewBox:"0 0 150 120"},e),s.a.createElement("g",{fill:"none",fillRule:"evenodd"},s.a.createElement("path",{fill:"#EBEEF5",d:"M109.545 78h5.463A2.995 2.995 0 00118 75.01V34.99c0-1.648-1.34-2.99-2.992-2.99H62.992A2.995 2.995 0 0060 34.99v2.027h-3V34.99c0-3.308 2.69-5.99 5.992-5.99h52.016A5.993 5.993 0 01121 34.99v40.02c0 3.308-2.69 5.99-5.992 5.99h-2.744l-.558 5.65c-.217 2.197-1.783 2.842-3.49 1.45l-8.7-7.1h-18.69v-3h19.76l8.29 6.767.67-6.767zM37.33 91.9c-1.942 1.057-3.23.15-2.878-2.027l1.237-7.64A25.886 25.886 0 0130 66c0-14.36 11.637-26 26-26 14.36 0 26 11.637 26 26 0 14.36-11.637 26-26 26-4.627 0-8.973-1.21-12.737-3.327L37.33 91.9zm5.958-6.656l1.447.814A22.878 22.878 0 0056 89c12.705 0 23-10.296 23-23 0-12.705-10.296-23-23-23-12.705 0-23 10.296-23 23a22.894 22.894 0 005.03 14.36l.833 1.04-1.11 6.855 5.535-3.01zm13.108-31.452c2.304 0 4.176.612 5.616 1.908 1.44 1.26 2.16 2.988 2.16 5.148 0 1.764-.468 3.24-1.368 4.392-.324.396-1.332 1.332-3.024 2.808-.684.576-1.188 1.224-1.512 1.872-.396.72-.576 1.512-.576 2.376v.612H53.84v-.612c0-1.332.216-2.484.72-3.42.468-1.008 1.836-2.484 4.068-4.464l.612-.684c.648-.828 1.008-1.692 1.008-2.628 0-1.26-.36-2.232-1.044-2.952-.72-.72-1.764-1.08-3.06-1.08-1.62 0-2.808.504-3.528 1.548-.648.864-.972 2.088-.972 3.672h-3.78c0-2.628.756-4.68 2.268-6.192 1.512-1.548 3.6-2.304 6.264-2.304zm-.648 21.06c.756 0 1.404.216 1.908.72.504.468.756 1.08.756 1.836s-.288 1.368-.792 1.872a2.703 2.703 0 01-1.872.72c-.72 0-1.368-.252-1.872-.756s-.756-1.116-.756-1.836c0-.756.252-1.368.756-1.836.504-.504 1.152-.72 1.872-.72z",fillRule:"nonzero"}),s.a.createElement("path",{fill:"#F7F8FA",d:"M83.23 56h24.275c.818 0 1.495-.672 1.495-1.5 0-.834-.67-1.5-1.495-1.5H81.93a28.845 28.845 0 013.002 11h12.56a1.5 1.5 0 110 3h-12.51a29.422 29.422 0 00-.05-3zM72.285 42h35.22c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5H76a28.945 28.945 0 00-3.715-3z"})))}},914:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onViewedOnce=t.isViewed=void 0;var r=a(n(208));t.isViewed=function(e){if(!document.body||!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.bottom<(window.innerHeight||n.clientHeight)};var c=function(){};t.onViewedOnce=function(e,n,a){if(t.isViewed(e))return n.call(a,e),c;var i=r.default((function(){t.isViewed(e)&&(n.call(a,e),o())}),250);function o(){window.removeEventListener("scroll",i),window.removeEventListener("resize",i)}return window.addEventListener("scroll",i),window.addEventListener("resize",i),o}},915:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onFullyViewedOnce=t.isFullyViewed=void 0;var r=a(n(208)),c=a(n(235));t.isFullyViewed=function(e,t){var n=e.getBoundingClientRect(),a=n.right,r=n.bottom,c=t.getBoundingClientRect(),i=c.right;return r<=c.bottom&&a<=i},t.onFullyViewedOnce=function(e,n,a,i){if(t.isFullyViewed(e,n))return a.call(i,e),c.default;var o=r.default((function(){t.isFullyViewed(e,n)&&(a.call(i,e),s())}),250);n.addEventListener("scroll",o),n.addEventListener("resize",o);var s=function(){n.removeEventListener("scroll",o),n.removeEventListener("resize",o)};return s}},920:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(20),r=n.n(a),c=n(21),i=n.n(c),o=n(22),s=n.n(o),l=n(23),u=n.n(l),d=n(17),p=n.n(d),h=n(1),f=n.n(h),m=n(11),b=n.n(m),v=n(110),g=n.n(v),O=n(5);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var y=function(e){s()(n,e);var t=j(n);function n(){var e;r()(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={uid:g()()},e.handleChange=function(t){var n=t.target.files;n&&e.uploadFiles(n),e.setState({uid:g()()})},e.uploadFiles=function(t){var n=e.props.multiple,a=g()(),r=Array.prototype.slice.call(t);n?r.map((function(t){e.upload(t,a)})):e.upload(r[0],a)},e.upload=function(t,n){var a,r=e.props,c=r.beforeUpload,i=r.customUpload,o=r.onStart,s=r.onSuccess,l=r.onError;if(c&&(a=c(t)),!1!==a&&i){var u={file:t,uid:n,status:"uploading"};o&&o(u),Promise.resolve().then((function(){return i({file:t})})).then((function(e){s&&s(Object.assign({},u,{remoteInfo:e,status:"success"}))})).catch((function(e){l&&l(Object.assign({},u,{remoteInfo:e,status:"error"}))}))}},e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.accept,a=e.multiple,r=e.disabled,c=e.onRef,i=e.onClick,o=e.children;return Object(O.g)("label",{className:b()("UploadPicture-wrapper",t)},Object(O.g)("input",{type:"file",accept:n,multiple:a,className:"UploadPicture-input",disabled:r,ref:c,onChange:this.handleChange,onClick:i}),o)}}]),n}(f.a.Component);y.defaultProps={multiple:!1,disabled:!1}},924:function(e,t,n){e.exports=n(59)(202)},941:function(e,t,n){"use strict";var a=n(2),r=n(3),c=n.n(r),i=n(11),o=n.n(i),s=Array.from(Array(12),(function(e,t){return Object(a.b)("span",{className:"Spinner-blade-12"},t)}));function l(e){var t=e.className,n=e.white,r=e.large;return Object(a.b)("div",{className:o()("Spinner-blade",t,{"Spinner-blade--large":r,"Spinner-blade--white":n}),children:s})}l.propTypes={className:c.a.string,large:c.a.bool,white:c.a.bool};var u=l;t.a=u},942:function(e,t,n){"use strict";var a=n(77),r=n.n(a),c=n(20),i=n.n(c),o=n(21),s=n.n(o),l=n(92),u=n.n(l),d=n(22),p=n.n(d),h=n(23),f=n.n(h),m=n(17),b=n.n(m),v=n(3),g=n.n(v),O=n(1),j=n.n(O),y=n(42),w=n(64),E=n.n(w),M=n(403),k=n.n(M),C=n(28),x=n(1123),R=n.n(x);var T=function(e,t){return function(n){var a=t(n);return R()(a,n),a.displayName="".concat(e,"(").concat(function(e){return e.displayName||e.name||"Component"}(n),")"),a}};function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var r=b()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=E()((function(){var e=new IntersectionObserver((function(t){t.forEach((function(t){if(0!==t.intersectionRatio){var n=t.target;e.unobserve(n),n.handleChange&&(n.handleChange(),n.handleChange=null)}}))}),{threshold:[.1]});return e})),A=function(e,t,n,a){return T("track",(function(r){return function(c){p()(l,c);var o=S(l);function l(){var e;i()(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=o.call.apply(o,[this].concat(n)),I(u()(e),"values_",{}),I(u()(e),"trackCardShow",(function(){var t=e.values,n=t.viewInfo,a=t.extraInfo;C.a.trackCardShow(e.element,n,a)})),e}return s()(l,[{key:"parseValues",value:function(){var r,c=this,i=function(e){return"function"==typeof e?e(c.props):e};this.values={viewLocation:e,moduleInfo:(r=i(t),r?r.type||r.sub_type?{card:{card_type:"Content",content:r}}:r:null),viewInfo:i(n),extraInfo:i(a)}}},{key:"setModule",value:function(){var e=this.values,t=e.viewLocation,n=e.moduleInfo;C.a.setModule(this.element,t,n)}},{key:"componentDidMount",value:function(){this.element=Object(y.findDOMNode)(this),this.parseValues(),this.values.viewInfo&&(this.element.handleChange=this.trackCardShow,z().observe(this.element))}},{key:"componentDidUpdate",value:function(){this.parseValues()}},{key:"componentWillUnmount",value:function(){this.values.viewInfo&&(z().unobserve(this.element),this.element.handleChange=null),this.element=null}},{key:"render",value:function(){return j.a.createElement(r,this.props)}},{key:"values",get:function(){return this.values_},set:function(e){k()(e,this.values_)||(this.values_=e,this.setModule())}}]),l}(O.Component)}))},_=function(e){p()(n,e);var t=S(n);function n(){var e;i()(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return e=t.call.apply(t,[this].concat(c)),I(u()(e),"Component",A.apply(void 0,r()(e.props.options))((function(){return e.props.children}))),e}return s()(n,[{key:"render",value:function(){return"undefined"!=typeof window&&window.IntersectionObserver?j.a.createElement(this.Component,null):this.props.children}}]),n}(O.Component);I(_,"propTypes",{children:g.a.element.isRequired,options:g.a.array.isRequired});t.a=_},944:function(e,t,n){var a,r,c;r=[t],void 0===(c="function"==typeof(a=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var a={get passive(){n=!0}};window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}function r(e){return s.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))}function c(e){var t=e||window.event;return!!r(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)}function i(){setTimeout((function(){void 0!==p&&(document.body.style.paddingRight=p,p=void 0),void 0!==d&&(document.body.style.overflow=d,d=void 0)}))}var o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),s=[],l=!1,u=-1,d=void 0,p=void 0;e.disableBodyScroll=function(e,a){if(o){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!s.some((function(t){return t.targetElement===e}))){var i={targetElement:e,options:a||{}};s=[].concat(t(s),[i]),e.ontouchstart=function(e){1===e.targetTouches.length&&(u=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,a,i,o;1===t.targetTouches.length&&(a=e,o=(n=t).targetTouches[0].clientY-u,r(n.target)||(a&&0===a.scrollTop&&0<o||(i=a)&&i.scrollHeight-i.scrollTop<=i.clientHeight&&o<0?c(n):n.stopPropagation()))},l||(document.addEventListener("touchmove",c,n?{passive:!1}:void 0),l=!0)}}else{f=a,setTimeout((function(){if(void 0===p){var e=!!f&&!0===f.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(p=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===d&&(d=document.body.style.overflow,document.body.style.overflow="hidden")}));var h={targetElement:e,options:a||{}};s=[].concat(t(s),[h])}var f},e.clearAllBodyScrollLocks=function(){o?(s.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),l&&(document.removeEventListener("touchmove",c,n?{passive:!1}:void 0),l=!1),s=[],u=-1):(i(),s=[])},e.enableBodyScroll=function(e){if(o){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,s=s.filter((function(t){return t.targetElement!==e})),l&&0===s.length&&(document.removeEventListener("touchmove",c,n?{passive:!1}:void 0),l=!1)}else(s=s.filter((function(t){return t.targetElement!==e}))).length||i()}})?a.apply(t,r):a)||(e.exports=c)},952:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(13),r=n(14),c=n(15),i=n(16),o=n(9),s=n(2),l=n(1),u=n(11),d=n.n(u);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(c.a)(n,e);var t=p(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return Object(s.b)("div",{className:d()("Badge",t),children:n})}}]),n}(l.Component),f=n(234),m=n(1155),b=n(24);function v(e){return Object(s.b)(f.a,Object.assign({as:"a",href:b.F,target:"_blank",rel:"noopener noreferrer",zaBlock:"VipBadge",zaType:"Button",zaEventType:"Click",zaAction:"OpenUrl",extra:{link:{url:b.F}}},e,{children:Object(s.c)("span",{css:{display:"inline-flex",alignItems:"center"},children:["​",Object(s.b)(m.a,{css:{height:"1em",width:"1em","&:hover":{cursor:"pointer"}}})]})}))}var g=Object(l.memo)(v);t.b=h},987:function(e,t,n){"use strict";var a=n(32),r=n(2),c=n(372),i=n(90),o=n(850),s=n(112),l=n.n(s),u=n(150),d=l()(u.findImageSpec),p=function(e,t){return Object(u.imgUrl)(e,d(t))};t.a=function(e){var t=e.user,n=e.size,s=void 0===n?38:n,l=e.noBadge,u=void 0!==l&&l,d=e.noLink,h=void 0!==d&&d,f=e.linkProps,m=Object(a.a)(e,["user","size","noBadge","noLink","linkProps"]),b=t.avatarUrl,v=t.isOrg,g=t.urlToken,O=!h&&g?"https://www.zhihu.com/".concat(v?"org":"people","/").concat(g):null,j=Object(r.b)(i.Image,{loading:"lazy",src:p(b,s),srcSet:"".concat(p(b,2*s)," 2x"),size:s,display:"block",css:{borderRadius:"50%"}});return Object(r.c)(i.Box,Object.assign({display:"inline-block",size:s,css:{position:"relative"}},m,{children:[O?Object(r.b)(o.a,Object.assign({href:O,target:"_blank"},f,{children:j})):j,!u&&Object(r.b)(c.c,{css:Object(c.f)(s),isOrg:v,badge:t.badgeV2||t.badge,linkify:!h,enableTooltip:!0})]}))}},988:function(e,t,n){"use strict";var a=n(40),r=n(2),c=n(1),i=n(73),o=n.n(i),s=n(25),l=n(378),u=Object(s.connect)((function(e){return{hasData:e.emoticons.emoticonGroupList.length>0}}));t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysShow,n=void 0!==t&&t;return function(e){return u(o()((function(t){var i=t.hasData,o=Object(c.useState)(!1),u=Object(a.a)(o,2),d=u[0],p=u[1],h=Object(s.useDispatch)();return Object(c.useEffect)((function(){i?p(!0):h(Object(l.d)()).then((function(e){var t=e.payload.data[0].id;h(Object(l.e)(t)),p(!0)})).catch((function(){p(!0)}))}),[h,i]),(!d||!n)&&Object(r.b)(e,Object.assign({},t))}),e))}}},993:function(e,t,n){"use strict";var a=n(13),r=n(14),c=n(15),i=n(16),o=n(9),s=n(2),l=n(1),u=n(25),d=n(19),p=n(3),h=n.n(p),f=n(11),m=n.n(f),b=n(255),v=n.n(b),g=n(66),O=n(234),j=n(378),y=n(37),w=n(236),E=n(888),M=n(40),k=n(152);function C(e){var t,n,a,r,c,i,o,u,d,p=e.className,h=e.emoticonGroupList,f=e.curEmoticonGroupId,b=e.onGroupSelected,v=e.vipEnabled,O=Object(l.useRef)(),j=Object(k.a)(v,h),y=(t=O,n=Object(l.useState)({left:null,x:null}),a=Object(M.a)(n,2),r=a[0],c=a[1],i=Object(l.useState)(!1),o=Object(M.a)(i,2),u=o[0],d=o[1],{onMouseDown:Object(g.c)((function(e){var n;d(!0);var a=null===(n=t.current)||void 0===n?void 0:n.scrollLeft,r=e.clientX;c({left:a,x:r}),e.preventDefault()})),onMouseMove:Object(g.c)((function(e){if(u){var n=e.clientX-r.x;t.current&&(t.current.scrollLeft=r.left-n)}})),onMouseUp:Object(g.c)((function(){u&&d(!1)}))});return Object(s.b)("div",{className:m()("EmoticonsFooter",p),children:Object(s.b)("ul",Object.assign({className:"EmoticonsFooter-items",ref:O},y,{children:j.map((function(e){return Object(s.b)("li",{className:m()("EmoticonsFooter-item",{"EmoticonsFooter-item--selected":f===e.id}),onClick:function(){b(e.id)},children:Object(s.b)("img",{src:e.iconUrl,className:"EmoticonsFooter-itemIcon"})},e.id)}))}))})}var x=n(941);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var T=function(e){Object(c.a)(n,e);var t=R(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).handleMouseEnter=function(e,t){e.dynamicImageUrl&&(t.target.src=e.dynamicImageUrl)},e.handleMouseLeave=function(e,t){e.dynamicImageUrl&&(t.target.src=e.staticImageUrl)},e.handleSelectEmoticon=function(t,n){(0,e.props.onSelectEmoticon)(t,n)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.data,r=void 0===a?[]:a;return 0===r.length?Object(s.b)(x.a,{className:"EmoticonPanel-spinner"}):Object(s.b)("ul",{className:"EmoticonPanel",children:r.map((function(t){return Object(s.c)(O.a,{zaType:"Button",zaText:t.title,zaEventType:"Click",zaBlock:"vip"===n?"VipEmoticon":"Emoticon",as:"li",className:m()("EmoticonPanel-item",{"EmoticonPanel-item--big":"emoji"!==n}),onClick:function(){e.handleSelectEmoticon(t,n)},children:[Object(s.b)("img",{src:t.staticImageUrl,title:"emoji"===n?t.title:"",className:m()({"EmoticonPanel-itemImg--small":"emoji"===n,"EmoticonPanel-itemImg--big":"emoji"!==n}),onMouseOver:function(n){e.handleMouseEnter(t,n)},onMouseOut:function(n){e.handleMouseLeave(t,n)},alt:t.title}),"emoji"!==n&&Object(s.b)("span",{className:"EmoticonPanel-itemTitle",children:t.title})]},t.id)}))})}}]),n}(l.Component);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}T.propTypes={type:h.a.string.isRequired,data:h.a.array.isRequired,onSelectEmoticon:h.a.func.isRequired};var I=function(e){Object(c.a)(n,e);var t=S(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).getCurEmoticonGroupPanleData=function(){var t=e.props,n=t.curEmoticonGroupId;return t.emoticonPanelList.filter((function(e){return e.groupId===n}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.changeSelectedEmoticonPanel,n=e.curEmoticonPanelId,a=e.className,r=this.getCurEmoticonGroupPanleData();return r.length<=1?null:Object(s.b)("ul",{className:m()("EmoticonPagination",a),children:r.map((function(e){return Object(s.b)("li",{className:m()("EmoticonPagination-bullet",{"EmoticonPagination-bullet--active":e.id===n}),onClick:function(){t(e.id)}},e.id)}))})}}]),n}(l.Component);I.propsTypes={className:h.a.string};var z=Object(u.connect)((function(e){var t=e.emoticons;return{curEmoticonGroupId:t.curEmoticonGroupId,emoticonPanelList:t.emoticonPanelList,curEmoticonPanelId:t.curEmoticonPanelId}}),{changeSelectedEmoticonPanel:j.b})(I),A=n(0),_=n(838);function N(e){var t=e.show,n=e.onClick,a=Object(g.c)((function(){null==n||n()}));return t&&Object(s.c)(O.a,{zaType:"Button",zaEventType:"Click",zaAction:"OpenUrl",zaBlock:"VipBrand",extra:{link:{url:E.a}},css:function(e){return Object(A.a)({backgroundColor:e.colorMod(e.colors.GYL08A).alpha(.25),color:e.colors.GYL12A,display:"flex",alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",lineHeight:"17px",userSelect:"none"},"&:hover",{cursor:"pointer"})},onClick:a,children:["开通会员解锁全部会员表情 ",Object(s.b)(_.a,{})]})}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var B={containerClass:"Emoticons-panelContainer",ContainerEl:"ul",threshold:10},L=function(e){Object(c.a)(n,e);var t=P(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={showVipStickerModal:!1},r.setShowVipStickerModal=function(e){r.setState({showVipStickerModal:e})},r.handleGetSwiperInstance=function(e){r.mousetrap=new v.a,r.swiperInstance=e,r.mousetrap.bind("left",(function(){e.slidePrev()})),r.mousetrap.bind("right",(function(){e.slideNext()}))},r.handleEmoticonGroupSelected=function(e){var t=r.props,n=t.getEmoticonsDetail,a=t.emoticonGroupDetail,c=t.changeSelectedEmoticonGroup,i=t.changeSelectedEmoticonPanel;a[e]||n(e),c(e),i("".concat(e,"-0"))},r.handleSlideChange=function(){var e=r.props,t=e.emoticonPanelList,n=e.getEmoticonsDetail,a=e.changeSelectedEmoticonPanel,c=e.changeSelectedEmoticonGroup;if(r.swiperInstance){var i=t[r.swiperInstance.activeIndex];a(i.id),c(i.groupId),0===i.data.length&&n(i.groupId)}},r.handleRequestVip=function(){r.setShowVipStickerModal(!0)},r.handleSelectEmoticon=function(e,t){var n=r.props,a=n.onSelectEmoticon,c=n.isVip;"vip"!==t||c?a(e,t):r.handleRequestVip()},r.swiperInstance=Object(l.createRef)(),r}return Object(r.a)(n,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.changeSelectedEmoticonGroup,n=e.changeSelectedEmoticonPanel,a=e.emoticonPanelList;t(a[0].groupId),n(a[0].id),this.mousetrap.reset()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.emoticonGroupList,r=void 0===a?[]:a,c=t.curEmoticonGroupId,i=t.emoticonPanelList,o=t.curEmoticonPanelId,l=t.isVip,u=t.vipEnabled,d=void 0!==u&&u,p=t.Swiper,h=this.state.showVipStickerModal,f=this.setShowVipStickerModal,b=Object(k.a)(d,i);return Object(s.b)(O.b,{block:"EmoticonsCard",children:Object(s.c)("div",{className:m()("Emoticons",n),children:[p?Object(s.b)(p,Object.assign({},B,{activeSlideKey:o,getSwiper:this.handleGetSwiperInstance,on:{slideChange:this.handleSlideChange},children:b.map((function(t){return Object(s.b)("li",{className:"Emoticons-panels-item",children:Object(s.b)(T,{type:t.type,data:t.data,onSelectEmoticon:e.handleSelectEmoticon})},t.id)}))})):Object(s.b)("div",{css:{height:183}}),Object(s.b)(z,{className:"Emoticons-Pagination"}),Object(s.b)(N,{show:d&&!l,onClick:this.handleRequestVip}),Object(s.b)(C,{emoticonGroupList:r,curEmoticonGroupId:c,onGroupSelected:this.handleEmoticonGroupSelected,vipEnabled:d}),Object(s.b)(E.c,{show:h,setShow:f,type:E.b.comment_sticker})]})})}}]),n}(l.Component);L.propTypes={className:h.a.string,onSelectEmoticon:h.a.func};t.a=Object(d.compose)(Object(u.connect)((function(e){var t=e.emoticons,n=t.emoticonGroupList,a=t.curEmoticonGroupId,r=t.emoticonGroupDetail,c=t.emoticonPanelList;return{emoticonGroupList:n,curEmoticonGroupId:a,emoticonGroupDetail:r,emoticonPanelList:void 0===c?[]:c,curEmoticonPanelId:t.curEmoticonPanelId,isVip:Object(y.i)(e)}}),{getEmoticonsDetail:j.e,changeSelectedEmoticonGroup:j.a,changeSelectedEmoticonPanel:j.b}),Object(w.a)(null),(function(e){return function(t){var a=Object(g.d)((function(){return n.e(44).then(n.t.bind(null,2570,7))}));return Object(s.b)(e,Object.assign({},t,{Swiper:a}))}}))(L)}}]);
//# sourceMappingURL=main.navbar-messages.5795c7154605dc288a96.js.map